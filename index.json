[{"categories":null,"content":" -- -- const manifestUri = 'https://storage.googleapis.com/shaka-demo-assets/angel-one-hls/hls.m3u8'; async function init() { // When using the UI, the player is made automatically by the UI object. const video = document.getElementById('video'); const ui = video['ui']; const config = { 'seekBarColors': { base: 'rgba(255, 0, 0, 0.3)', buffered: 'rgba(0, 0, 255, 0.54)', played: 'rgb(0, 255, 0)', }, // 'customContextMenu' : true, // 'contextMenuElements' : ['statistics'], 'overflowMenuButtons' : ['statistics'], 'enableTooltips' : true, 'controlPanelElements': ['play_pause', 'time_and_duration', 'picture_in_picture', 'loop', 'spacer', 'language', 'captions', 'playback_rate', 'quality', 'mute', 'volume', 'fullscreen', 'overflow_menu'] }; ui.configure(config); const controls = ui.getControls(); const player = controls.getPlayer(); // Attach player and ui to the window to make it easy to access in the JS console. window.player = player; window.ui = ui; // Listen for error events. player.addEventListener('error', onPlayerErrorEvent); controls.addEventListener('error', onUIErrorEvent); // Try to load a manifest. // This is an asynchronous process. try { await player.load(manifestUri); // This runs if the asynchronous load is successful. console.log('The video has now been loaded!'); } catch (error) { onPlayerError(error); } } function onPlayerErrorEvent(errorEvent) { // Extract the shaka.util.Error object from the event. onPlayerError(event.detail); } function onPlayerError(error) { // Handle player error console.error('Error code', error.code, 'object', error); } function onUIErrorEvent(errorEvent) { // Extract the shaka.util.Error object from the event. onPlayerError(event.detail); } function initFailed(errorEvent) { // Handle the failure to load; errorEvent.detail.reasonCode has a // shaka.ui.FailReasonCode describing why. console.error('Unable to load the UI library!'); } // Listen to the custom shaka-ui-loaded event, to wait until the UI is loaded. document.addEventListener('shaka-ui-loaded', init); // Listen to the custom shaka-ui-load-failed event, in case Shaka Player fails // to load (e.g. due to lack of browser support). document.addEventListener('shaka-ui-load-failed', initFailed); ","date":"2022-01-25","objectID":"/anr/posts/shaka-player-test/:0:0","series":null,"tags":null,"title":"Shaka Player_test","uri":"/anr/posts/shaka-player-test/#"},{"categories":null,"content":" .video-js .vjs-time-control{display:block;} .video-js .vjs-remaining-time{display: none;} var player = videojs('vid1', { language: 'zh-Hans', playbackRates: [0.50, 0.75, 1.00, 1.25, 1.50, 1.75, 2.00] }); player.play(); ","date":"2022-01-25","objectID":"/anr/posts/video.js-test/:0:0","series":null,"tags":null,"title":"Videojs_test","uri":"/anr/posts/video.js-test/#"},{"categories":null,"content":"安装静态网站生成器hugo-extended 官方教程 https://gohugo.io/getting-started/installing/ ","date":"2021-12-06","objectID":"/anr/posts/anr/:1:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#安装静态网站生成器hugo-extended"},{"categories":null,"content":"创建或使用守望者仓库watcher_test https://github.com/new https://github.com/dnasdw/watcher_test ","date":"2021-12-06","objectID":"/anr/posts/anr/:2:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#创建或使用守望者仓库watcher_test"},{"categories":null,"content":"创建部署仓库draft https://github.com/new https://github.com/dnasdw/draft ","date":"2021-12-06","objectID":"/anr/posts/anr/:3:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#创建部署仓库draft"},{"categories":null,"content":"创建评论仓库comments_test https://github.com/new https://github.com/dnasdw/comments_test ","date":"2021-12-06","objectID":"/anr/posts/anr/:4:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#创建评论仓库comments_test"},{"categories":null,"content":"创建源文件仓库pages_draft https://github.com/new https://github.com/dnasdw/pages_draft 克隆到本地并新建站点 git clone --recursive https://github.com/dnasdw/pages_draft.git hugo new site pages_draft --force cd pages_draft 创建.gitignore 内容来自https://github.com/github/gitignore/blob/main/community/Golang/Hugo.gitignore # Generated files by hugo /public/ /resources/_gen/ /assets/jsconfig.json hugo_stats.json # Executable may be added to repository hugo.exe hugo.darwin hugo.linux # Temporary lock file while building /.hugo_build.lock 添加主题 git submodule add https://github.com/dnasdw/DoIt.git themes/DoIt 修改config.toml baseURL = \"https://dnasdw.github.io/draft\" defaultContentLanguage = \"zh-cn\" theme = \"DoIt\" title = \"聚草稿\" [languages] [languages.zh-cn] languageCode = \"zh-CN\" hasCJKLanguage = true [params] version = \"0.2.X\" 提交推送 git add * git commit -m setup git push origin master ","date":"2021-12-06","objectID":"/anr/posts/anr/:5:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#创建源文件仓库pages_draft"},{"categories":null,"content":"创建MY_GITHUB_TOKEN 查看是否已有token https://github.com/settings/tokens 如果没有则新建token https://github.com/settings/tokens/new 配置参考 Note: actions-gh-pages Expiration: No expiration Select scopes: [v] repo ","date":"2021-12-06","objectID":"/anr/posts/anr/:6:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#创建my_github_token"},{"categories":null,"content":"把MY_GITHUB_TOKEN配置到守望者仓库中 查看是否已配置token https://github.com/dnasdw/watcher_test/settings/secrets/actions 如果没有则配置token https://github.com/dnasdw/watcher_test/settings/secrets/actions/new 配置参考 MY_GITHUB_TOKEN: ghp_* ","date":"2021-12-06","objectID":"/anr/posts/anr/:7:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#把my_github_token配置到守望者仓库中"},{"categories":null,"content":"配置守望者 克隆到本地 git clone --recursive https://github.com/dnasdw/watcher_test.git cd watcher_test git submodule add https://github.com/dnasdw/pages_draft.git pages_draft 创建github actions配置.github/workflows/draft-gh-pages.yml 配置参考 name:GitHub Pageson:workflow_dispatch:inputs:commit_id:description:The branch, tag or SHA of the submodule to checkout.required:falsedefault:push:branches:- masterjobs:deploy:runs-on:ubuntu-20.04concurrency:group:${{ github.workflow }}-${{ github.ref }}steps:- uses:actions/checkout@v2with:token:${{ secrets.MY_GITHUB_TOKEN }}submodules:recursivefetch-depth:0- name:Checkout submodule with github tokenif:${{ github.event.inputs.commit_id != '' }}uses:actions/checkout@v2with:repository:dnasdw/pages_draftpath:pages_draftref:${{ github.event.inputs.commit_id }}token:${{ secrets.MY_GITHUB_TOKEN }}submodules:recursivefetch-depth:0- name:Get full commit message like peaceiris/actions-gh-pages@v3working-directory:./pages_draftrun:|printf -v FULL_COMMIT_MESSAGE %s \"$(git log -1 --pretty=format:%B) dnasdw/pages_draft@$(git log -1 --pretty=format:%H)\" echo \"$FULL_COMMIT_MESSAGE\" echo \"FULL_COMMIT_MESSAGE\u003c\u003cEOF\" \u003e\u003e $GITHUB_ENV echo \"$FULL_COMMIT_MESSAGE\" \u003e\u003e $GITHUB_ENV echo \"EOF\" \u003e\u003e $GITHUB_ENV- name:Disable quotePathworking-directory:./pages_draftrun:git config core.quotePath false- name:Setup Hugouses:peaceiris/actions-hugo@v2with:hugo-version:latestextended:true- name:Buildworking-directory:./pages_draftrun:hugo --minify- name:Deployuses:peaceiris/actions-gh-pages@v3if:${{ github.ref == 'refs/heads/master' }}with:personal_token:${{ secrets.MY_GITHUB_TOKEN }}external_repository:dnasdw/draftpublish_branch:gh-pagespublish_dir:./pages_draft/publicforce_orphan:falseuser_name:Sun Daowenuser_email:sundaowen@gmail.comfull_commit_message:${{ env.FULL_COMMIT_MESSAGE }} 提交推送 git add * git commit -m \"setup pages\" git push origin master ","date":"2021-12-06","objectID":"/anr/posts/anr/:8:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#配置守望者"},{"categories":null,"content":"配置中转worker 教程 https://github.com/dnasdw/workflow_dispatch-worker 配置参考 GITHUB_WEBHOOK_SECRET: 2008* Payload URL: https://webhook_workflow_dispatch-worker.dnasdw.workers.dev/api/github/repos/dnasdw/watcher_test/actions/workflows/draft-gh-pages.yml/dispatches ","date":"2021-12-06","objectID":"/anr/posts/anr/:9:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#配置中转worker"},{"categories":null,"content":"github pages地址 配置地址 https://github.com/dnasdw/draft/settings/pages 页面地址 https://dnasdw.github.io/draft/ ","date":"2021-12-06","objectID":"/anr/posts/anr/:10:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#github-pages地址"},{"categories":null,"content":"安装评论系统 https://utteranc.es/ 应用地址 https://github.com/apps/utterances 配置权限 Only select repositories: dnasdw/comments_test ","date":"2021-12-06","objectID":"/anr/posts/anr/:11:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#安装评论系统"},{"categories":null,"content":"更新config 配置参考 baseURL = \"https://dnasdw.github.io/draft\" # [en, zh-cn, fr, pl, ...] determines default content language # [en, zh-cn, fr, pl, ...] 设置默认的语言 defaultContentLanguage = \"zh-cn\" # theme # 主题 theme = \"DoIt\" # themes directory # 主题目录 # themesDir = \"themes\" # website title # 网站标题 # TODO title = \"聚草稿\" # whether to use robots.txt # 是否使用 robots.txt enableRobotsTXT = true # whether to use git commit log # 是否使用 git 信息 enableGitInfo = true # whether to use emoji code # 是否使用 emoji 代码 enableEmoji = true [languages] [languages.zh-cn] weight = 1 # 网站语言, 仅在这里 CN 大写 languageCode = \"zh-CN\" # 语言名称 languageName = \"简体中文\" # 是否包括中日韩文字 hasCJKLanguage = true # 默认每页列表显示的文章数目 paginate = 10 # [UA-XXXXXXXX-X] 谷歌分析代号 googleAnalytics = \"\" # 版权描述，仅仅用于 SEO copyright = \"This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.\" # 菜单配置 [languages.zh-cn.menu] [[languages.zh-cn.menu.main]] identifier = \"posts\" # 你可以在名称 (允许 HTML 格式) 之前添加其他信息, 例如图标 pre = \"\" # 你可以在名称 (允许 HTML 格式) 之后添加其他信息, 例如图标 post = \"\" name = \"所有文章\" url = \"posts/\" title = \"\" weight = 1 [[languages.zh-cn.menu.main]] identifier = \"tags\" pre = \"\" post = \"\" name = \"标签\" url = \"tags/\" title = \"\" weight = 2 [[languages.zh-cn.menu.main]] identifier = \"categories\" pre = \"\" post = \"\" name = \"分类\" url = \"categories/\" title = \"\" weight = 3 [[languages.zh-cn.menu.main]] identifier = \"series\" pre = \"\" post = \"\" name = \"系列\" url = \"series/\" title = \"\" weight = 4 [[languages.zh-cn.menu.main]] identifier = \"authors\" pre = \"\" post = \"\" name = \"作者\" url = \"authors/\" title = \"\" weight = 5 # TODO [[languages.zh-cn.menu.main]] identifier = \"github\" pre = \"\u003ci class='fab fa-github fa-fw'\u003e\u003c/i\u003e\" post = \"\" name = \"\" url = \"https://github.com/dnasdw/draft\" title = \"GitHub\" weight = 9 [languages.zh-cn.params] # 网站描述 # TODO description = \"聚草稿\" # 网站关键词 # TODO keywords = [\"聚草稿\", \"\"] # 应用图标配置 [languages.zh-cn.params.app] # 当添加到 iOS 主屏幕或者 Android 启动器时的标题, 覆盖默认标题 # TODO title = \"聚草稿\" # 是否隐藏网站图标资源链接 noFavicon = false # 更现代的 SVG 网站图标, 可替代旧的 .png 和 .ico 文件 svgFavicon = \"\" # Safari 图标颜色 iconColor = \"#5bbad5\" # Windows v8-10 磁贴颜色 tileColor = \"#da532c\" # 搜索配置 [languages.zh-cn.params.search] enable = true # 搜索引擎的类型 (\"lunr\", \"algolia\", \"fuse\") type = \"fuse\" # 文章内容最长索引长度 contentLength = 4000 # 搜索框的占位提示语 placeholder = \"\" # 最大结果数目 maxResultLength = 10 # 结果内容片段长度 snippetLength = 50 # 搜索结果中高亮部分的 HTML 标签 highlightTag = \"em\" # 是否在搜索索引中使用基于 baseURL 的绝对路径 absoluteURL = false [languages.zh-cn.params.search.algolia] index = \"\" appID = \"\" searchKey = \"\" [languages.zh-cn.params.search.fuse] # https://fusejs.io/api/options.html isCaseSensitive = false minMatchCharLength = 1 findAllMatches = false location = 0 threshold = 0.1 distance = 100 ignoreLocation = true useExtendedSearch = false ignoreFieldNorm = false # 主页信息设置 [languages.zh-cn.params.home] # RSS 文章数目 rss = 10 # 主页个人信息 [languages.zh-cn.params.home.profile] enable = true # Gravatar 邮箱，用于优先在主页显示的头像 gravatarEmail = \"\" # 主页显示头像的 URL avatarURL = \"/images/dnasdw256.png\" # 主页显示的网站标题 (支持 HTML 格式) title = \"\" # 主页显示的网站副标题 # TODO subtitle = \"\" # 是否为副标题显示打字机动画 typeit = false # 是否显示社交账号 social = true # 免责声明 (支持 HTML 格式) disclaimer = \"\" # 主页文章列表 [languages.zh-cn.params.home.posts] enable = true # 主页每页显示文章数量 paginate = 10 # 主页的社交信息设置 [languages.zh-cn.params.social] GitHub = \"dnasdw\" Linkedin = \"\" Twitter = \"sundaowen\" Instagram = \"\" Facebook = \"\" Telegram = \"\" Medium = \"\" Gitlab = \"dnasdw\" Youtubelegacy = \"\" Youtubecustom = \"\" Youtubechannel = \"\" Tumblr = \"\" Quora = \"\" Keybase = \"\" Pinterest = \"\" Reddit = \"\" Codepen = \"\" FreeCodeCamp = \"\" Bitbucket = \"dnasdw\" Stackoverflow = \"\" Weibo = \"dnasdw\" Odnoklassniki = \"\" VK = \"\" Flickr = \"\" Xing = \"\" Snapchat = \"\" Soundcloud = \"\" Spotify = \"\" Bandcamp = \"\" Paypal = \"\" Fivehundredpx = \"\" Mix = \"\" Goodreads = \"\" Lastfm = \"\" Foursquare = \"\" Hackernews = \"\" Kickstarter = \"\" Patreon = \"\" Steam = \"dnasdw\" Twitch = \"\" Strava = \"\" Skype = \"\" Whatsapp = \"\" Zhihu = \"dnasdw\" Douban = \"\" Angellist = \"\" Slidershare = \"\" Jsfiddle =","date":"2021-12-06","objectID":"/anr/posts/anr/:12:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#更新config"},{"categories":null,"content":"菜单url 如果config中baseURL包含子目录, 则menu配置中的url不能以斜杠开始, 比如\"所有文章\"的url不可以为/posts/, 但可以为posts/或./posts/. ","date":"2021-12-06","objectID":"/anr/posts/anr/:12:1","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#菜单url"},{"categories":null,"content":"头像文件 创建assets/images/dnasdw256.png, 并将config中的头像路径改为/images/dnasdw256.png. ","date":"2021-12-06","objectID":"/anr/posts/anr/:12:2","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#头像文件"},{"categories":null,"content":"网站图标 准备一个512x512的图标, 比如去https://www.flaticon.com/搜索一个合适的. 去https://realfavicongenerator.net/上传图标, 下载得到图标配置包, 解压到static目录. 如果config中baseURL包含子目录, 则需要将themes/DoIt/layouts/partials/head/link.html复制到layouts/partials/head/link.html, 并将favicon部分的链接前加上/子目录名, 比如href=\"/favicon.ico\"改为href=\"/draft/favicon.ico\". 配置参考 {{- if not .Site.Params.app.noFavicon -}} {{- with .Site.Params.app.svgFavicon -}} \u003clink rel=\"icon\" href=\"{{ . }}\"\u003e {{- else -}} \u003clink rel=\"shortcut icon\" type=\"image/x-icon\" href=\"/draft/favicon.ico\" /\u003e \u003clink rel=\"icon\" type=\"image/png\" sizes=\"32x32\" href=\"/draft/favicon-32x32.png\"\u003e \u003clink rel=\"icon\" type=\"image/png\" sizes=\"16x16\" href=\"/draft/favicon-16x16.png\"\u003e {{- end -}} \u003clink rel=\"apple-touch-icon\" sizes=\"180x180\" href=\"/draft/apple-touch-icon.png\"\u003e {{- with .Site.Params.app.iconColor -}} \u003clink rel=\"mask-icon\" href=\"/draft/safari-pinned-tab.svg\" color=\"{{ . }}\"\u003e {{- end -}} {{- if eq .Site.Params.enablePWA true -}} \u003clink rel=\"manifest\" href=\"/draft/site.webmanifest\"\u003e {{- end -}} {{- end -}} ","date":"2021-12-06","objectID":"/anr/posts/anr/:12:3","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#网站图标"},{"categories":null,"content":"补充缺失的中文译文 创建i18n/zh-CN.toml # Translations for Simplified Chinese # 简体中文的翻译 # https://gohugo.io/content-management/multilingual/#translation-of-strings [authors] other = \"作者\" ","date":"2021-12-06","objectID":"/anr/posts/anr/:12:4","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#补充缺失的中文译文"},{"categories":null,"content":"作者配置 创建data/authors/dnasdw.toml name = \"dnasdw\" link = \"https://github.com/dnasdw\" 之后就可以在文章的Front Matter中使用authors: [dnasdw]. ","date":"2021-12-06","objectID":"/anr/posts/anr/:12:5","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#作者配置"},{"categories":null,"content":"配置PWA 创建content/offline/index.md --- title: \"离线\" --- \u003e 你没有连接至互联网, 只有缓存的页面可用. 修改static/site.webmanifest, 添加start_url, 并填写name/short_name/start_url. { \"name\": \"聚草稿\", \"short_name\": \"聚草稿\", \"start_url\": \"/draft/\", \"icons\": [ { \"src\": \"/draft/android-chrome-192x192.png\", \"sizes\": \"192x192\", \"type\": \"image/png\" }, { \"src\": \"/draft/android-chrome-512x512.png\", \"sizes\": \"512x512\", \"type\": \"image/png\" } ], \"theme_color\": \"#ffffff\", \"background_color\": \"#ffffff\", \"display\": \"standalone\" } 如果config中baseURL包含子目录, 则需要将themes/DoIt/assets/js/sw.js复制到assets/js/sw.js, 并将相关链接前加上/子目录名, 比如/css/style.min.css改为/darft/css/style.min.css; 同样修改static/site.webmanifest中的相关路径, 其中start_url从/改为/子目录名/, 比如\"start_url\": \"/\"改为\"start_url\": \"/draft/\"; 还需要将themes/DoIt/layouts/partials/footer.html复制到layouts/partials/footer.html, 并修改注册参数, 比如.register('/sw.min.js', { scope: '/' })改为.register('/draft/sw.min.js', { scope: '/draft/' }). 配置参考 const BASE_CACHE_FILES = [ '/draft/css/style.min.css', '/draft/js/theme.min.js', '/draft/site.webmanifest' ] const OFFLINE_CACHE_FILES = [ '/draft/css/style.min.css', '/draft/js/theme.min.js', '/draft/site.webmanifest', '/draft/offline' ] const NOT_FOUND_CACHE_FILES = [ '/draft/css/style.min.css', '/draft/js/theme.min.js', '/draft/site.webmanifest', '/draft/404.html' ] const OFFLINE_PAGE = '/draft/offline' const NOT_FOUND_PAGE = '/draft/404.html' ","date":"2021-12-06","objectID":"/anr/posts/anr/:12:6","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#配置pwa"},{"categories":null,"content":"安装静态网站生成器hugo-extended 官方教程 https://gohugo.io/getting-started/installing/ ","date":"2021-12-06","objectID":"/anr/posts/anr/:13:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#安装静态网站生成器hugo-extended-1"},{"categories":null,"content":"创建或使用守望者仓库watcher_test https://github.com/new https://github.com/dnasdw/watcher_test ","date":"2021-12-06","objectID":"/anr/posts/anr/:14:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#创建或使用守望者仓库watcher_test-1"},{"categories":null,"content":"创建部署仓库draft https://github.com/new https://github.com/dnasdw/draft ","date":"2021-12-06","objectID":"/anr/posts/anr/:15:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#创建部署仓库draft-1"},{"categories":null,"content":"创建评论仓库comments_test https://github.com/new https://github.com/dnasdw/comments_test ","date":"2021-12-06","objectID":"/anr/posts/anr/:16:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#创建评论仓库comments_test-1"},{"categories":null,"content":"创建源文件仓库pages_draft https://github.com/new https://github.com/dnasdw/pages_draft 克隆到本地并新建站点 git clone --recursive https://github.com/dnasdw/pages_draft.git hugo new site pages_draft --force cd pages_draft 创建.gitignore 内容来自https://github.com/github/gitignore/blob/main/community/Golang/Hugo.gitignore # Generated files by hugo /public/ /resources/_gen/ /assets/jsconfig.json hugo_stats.json # Executable may be added to repository hugo.exe hugo.darwin hugo.linux # Temporary lock file while building /.hugo_build.lock 添加主题 git submodule add https://github.com/dnasdw/DoIt.git themes/DoIt 修改config.toml baseURL = \"https://dnasdw.github.io/draft\" defaultContentLanguage = \"zh-cn\" theme = \"DoIt\" title = \"聚草稿\" [languages] [languages.zh-cn] languageCode = \"zh-CN\" hasCJKLanguage = true [params] version = \"0.2.X\" 提交推送 git add * git commit -m setup git push origin master ","date":"2021-12-06","objectID":"/anr/posts/anr/:17:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#创建源文件仓库pages_draft-1"},{"categories":null,"content":"创建MY_GITHUB_TOKEN 查看是否已有token https://github.com/settings/tokens 如果没有则新建token https://github.com/settings/tokens/new 配置参考 Note: actions-gh-pages Expiration: No expiration Select scopes: [v] repo ","date":"2021-12-06","objectID":"/anr/posts/anr/:18:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#创建my_github_token-1"},{"categories":null,"content":"把MY_GITHUB_TOKEN配置到守望者仓库中 查看是否已配置token https://github.com/dnasdw/watcher_test/settings/secrets/actions 如果没有则配置token https://github.com/dnasdw/watcher_test/settings/secrets/actions/new 配置参考 MY_GITHUB_TOKEN: ghp_* ","date":"2021-12-06","objectID":"/anr/posts/anr/:19:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#把my_github_token配置到守望者仓库中-1"},{"categories":null,"content":"配置守望者 克隆到本地 git clone --recursive https://github.com/dnasdw/watcher_test.git cd watcher_test git submodule add https://github.com/dnasdw/pages_draft.git pages_draft 创建github actions配置.github/workflows/draft-gh-pages.yml 配置参考 name:GitHub Pageson:workflow_dispatch:inputs:commit_id:description:The branch, tag or SHA of the submodule to checkout.required:falsedefault:push:branches:- masterjobs:deploy:runs-on:ubuntu-20.04concurrency:group:${{ github.workflow }}-${{ github.ref }}steps:- uses:actions/checkout@v2with:token:${{ secrets.MY_GITHUB_TOKEN }}submodules:recursivefetch-depth:0- name:Checkout submodule with github tokenif:${{ github.event.inputs.commit_id != '' }}uses:actions/checkout@v2with:repository:dnasdw/pages_draftpath:pages_draftref:${{ github.event.inputs.commit_id }}token:${{ secrets.MY_GITHUB_TOKEN }}submodules:recursivefetch-depth:0- name:Get full commit message like peaceiris/actions-gh-pages@v3working-directory:./pages_draftrun:|printf -v FULL_COMMIT_MESSAGE %s \"$(git log -1 --pretty=format:%B) dnasdw/pages_draft@$(git log -1 --pretty=format:%H)\" echo \"$FULL_COMMIT_MESSAGE\" echo \"FULL_COMMIT_MESSAGE\u003c\u003cEOF\" \u003e\u003e $GITHUB_ENV echo \"$FULL_COMMIT_MESSAGE\" \u003e\u003e $GITHUB_ENV echo \"EOF\" \u003e\u003e $GITHUB_ENV- name:Disable quotePathworking-directory:./pages_draftrun:git config core.quotePath false- name:Setup Hugouses:peaceiris/actions-hugo@v2with:hugo-version:latestextended:true- name:Buildworking-directory:./pages_draftrun:hugo --minify- name:Deployuses:peaceiris/actions-gh-pages@v3if:${{ github.ref == 'refs/heads/master' }}with:personal_token:${{ secrets.MY_GITHUB_TOKEN }}external_repository:dnasdw/draftpublish_branch:gh-pagespublish_dir:./pages_draft/publicforce_orphan:falseuser_name:Sun Daowenuser_email:sundaowen@gmail.comfull_commit_message:${{ env.FULL_COMMIT_MESSAGE }} 提交推送 git add * git commit -m \"setup pages\" git push origin master ","date":"2021-12-06","objectID":"/anr/posts/anr/:20:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#配置守望者-1"},{"categories":null,"content":"配置中转worker 教程 https://github.com/dnasdw/workflow_dispatch-worker 配置参考 GITHUB_WEBHOOK_SECRET: 2008* Payload URL: https://webhook_workflow_dispatch-worker.dnasdw.workers.dev/api/github/repos/dnasdw/watcher_test/actions/workflows/draft-gh-pages.yml/dispatches ","date":"2021-12-06","objectID":"/anr/posts/anr/:21:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#配置中转worker-1"},{"categories":null,"content":"github pages地址 配置地址 https://github.com/dnasdw/draft/settings/pages 页面地址 https://dnasdw.github.io/draft/ ","date":"2021-12-06","objectID":"/anr/posts/anr/:22:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#github-pages地址-1"},{"categories":null,"content":"安装评论系统 https://utteranc.es/ 应用地址 https://github.com/apps/utterances 配置权限 Only select repositories: dnasdw/comments_test ","date":"2021-12-06","objectID":"/anr/posts/anr/:23:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#安装评论系统-1"},{"categories":null,"content":"更新config 配置参考 baseURL = \"https://dnasdw.github.io/draft\" # [en, zh-cn, fr, pl, ...] determines default content language # [en, zh-cn, fr, pl, ...] 设置默认的语言 defaultContentLanguage = \"zh-cn\" # theme # 主题 theme = \"DoIt\" # themes directory # 主题目录 # themesDir = \"themes\" # website title # 网站标题 # TODO title = \"聚草稿\" # whether to use robots.txt # 是否使用 robots.txt enableRobotsTXT = true # whether to use git commit log # 是否使用 git 信息 enableGitInfo = true # whether to use emoji code # 是否使用 emoji 代码 enableEmoji = true [languages] [languages.zh-cn] weight = 1 # 网站语言, 仅在这里 CN 大写 languageCode = \"zh-CN\" # 语言名称 languageName = \"简体中文\" # 是否包括中日韩文字 hasCJKLanguage = true # 默认每页列表显示的文章数目 paginate = 10 # [UA-XXXXXXXX-X] 谷歌分析代号 googleAnalytics = \"\" # 版权描述，仅仅用于 SEO copyright = \"This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.\" # 菜单配置 [languages.zh-cn.menu] [[languages.zh-cn.menu.main]] identifier = \"posts\" # 你可以在名称 (允许 HTML 格式) 之前添加其他信息, 例如图标 pre = \"\" # 你可以在名称 (允许 HTML 格式) 之后添加其他信息, 例如图标 post = \"\" name = \"所有文章\" url = \"posts/\" title = \"\" weight = 1 [[languages.zh-cn.menu.main]] identifier = \"tags\" pre = \"\" post = \"\" name = \"标签\" url = \"tags/\" title = \"\" weight = 2 [[languages.zh-cn.menu.main]] identifier = \"categories\" pre = \"\" post = \"\" name = \"分类\" url = \"categories/\" title = \"\" weight = 3 [[languages.zh-cn.menu.main]] identifier = \"series\" pre = \"\" post = \"\" name = \"系列\" url = \"series/\" title = \"\" weight = 4 [[languages.zh-cn.menu.main]] identifier = \"authors\" pre = \"\" post = \"\" name = \"作者\" url = \"authors/\" title = \"\" weight = 5 # TODO [[languages.zh-cn.menu.main]] identifier = \"github\" pre = \"\u003ci class='fab fa-github fa-fw'\u003e\u003c/i\u003e\" post = \"\" name = \"\" url = \"https://github.com/dnasdw/draft\" title = \"GitHub\" weight = 9 [languages.zh-cn.params] # 网站描述 # TODO description = \"聚草稿\" # 网站关键词 # TODO keywords = [\"聚草稿\", \"\"] # 应用图标配置 [languages.zh-cn.params.app] # 当添加到 iOS 主屏幕或者 Android 启动器时的标题, 覆盖默认标题 # TODO title = \"聚草稿\" # 是否隐藏网站图标资源链接 noFavicon = false # 更现代的 SVG 网站图标, 可替代旧的 .png 和 .ico 文件 svgFavicon = \"\" # Safari 图标颜色 iconColor = \"#5bbad5\" # Windows v8-10 磁贴颜色 tileColor = \"#da532c\" # 搜索配置 [languages.zh-cn.params.search] enable = true # 搜索引擎的类型 (\"lunr\", \"algolia\", \"fuse\") type = \"fuse\" # 文章内容最长索引长度 contentLength = 4000 # 搜索框的占位提示语 placeholder = \"\" # 最大结果数目 maxResultLength = 10 # 结果内容片段长度 snippetLength = 50 # 搜索结果中高亮部分的 HTML 标签 highlightTag = \"em\" # 是否在搜索索引中使用基于 baseURL 的绝对路径 absoluteURL = false [languages.zh-cn.params.search.algolia] index = \"\" appID = \"\" searchKey = \"\" [languages.zh-cn.params.search.fuse] # https://fusejs.io/api/options.html isCaseSensitive = false minMatchCharLength = 1 findAllMatches = false location = 0 threshold = 0.1 distance = 100 ignoreLocation = true useExtendedSearch = false ignoreFieldNorm = false # 主页信息设置 [languages.zh-cn.params.home] # RSS 文章数目 rss = 10 # 主页个人信息 [languages.zh-cn.params.home.profile] enable = true # Gravatar 邮箱，用于优先在主页显示的头像 gravatarEmail = \"\" # 主页显示头像的 URL avatarURL = \"/images/dnasdw256.png\" # 主页显示的网站标题 (支持 HTML 格式) title = \"\" # 主页显示的网站副标题 # TODO subtitle = \"\" # 是否为副标题显示打字机动画 typeit = false # 是否显示社交账号 social = true # 免责声明 (支持 HTML 格式) disclaimer = \"\" # 主页文章列表 [languages.zh-cn.params.home.posts] enable = true # 主页每页显示文章数量 paginate = 10 # 主页的社交信息设置 [languages.zh-cn.params.social] GitHub = \"dnasdw\" Linkedin = \"\" Twitter = \"sundaowen\" Instagram = \"\" Facebook = \"\" Telegram = \"\" Medium = \"\" Gitlab = \"dnasdw\" Youtubelegacy = \"\" Youtubecustom = \"\" Youtubechannel = \"\" Tumblr = \"\" Quora = \"\" Keybase = \"\" Pinterest = \"\" Reddit = \"\" Codepen = \"\" FreeCodeCamp = \"\" Bitbucket = \"dnasdw\" Stackoverflow = \"\" Weibo = \"dnasdw\" Odnoklassniki = \"\" VK = \"\" Flickr = \"\" Xing = \"\" Snapchat = \"\" Soundcloud = \"\" Spotify = \"\" Bandcamp = \"\" Paypal = \"\" Fivehundredpx = \"\" Mix = \"\" Goodreads = \"\" Lastfm = \"\" Foursquare = \"\" Hackernews = \"\" Kickstarter = \"\" Patreon = \"\" Steam = \"dnasdw\" Twitch = \"\" Strava = \"\" Skype = \"\" Whatsapp = \"\" Zhihu = \"dnasdw\" Douban = \"\" Angellist = \"\" Slidershare = \"\" Jsfiddle =","date":"2021-12-06","objectID":"/anr/posts/anr/:24:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#更新config-1"},{"categories":null,"content":"菜单url 如果config中baseURL包含子目录, 则menu配置中的url不能以斜杠开始, 比如\"所有文章\"的url不可以为/posts/, 但可以为posts/或./posts/. ","date":"2021-12-06","objectID":"/anr/posts/anr/:24:1","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#菜单url-1"},{"categories":null,"content":"头像文件 创建assets/images/dnasdw256.png, 并将config中的头像路径改为/images/dnasdw256.png. ","date":"2021-12-06","objectID":"/anr/posts/anr/:24:2","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#头像文件-1"},{"categories":null,"content":"网站图标 准备一个512x512的图标, 比如去https://www.flaticon.com/搜索一个合适的. 去https://realfavicongenerator.net/上传图标, 下载得到图标配置包, 解压到static目录. 如果config中baseURL包含子目录, 则需要将themes/DoIt/layouts/partials/head/link.html复制到layouts/partials/head/link.html, 并将favicon部分的链接前加上/子目录名, 比如href=\"/favicon.ico\"改为href=\"/draft/favicon.ico\". 配置参考 {{- if not .Site.Params.app.noFavicon -}} {{- with .Site.Params.app.svgFavicon -}} \u003clink rel=\"icon\" href=\"{{ . }}\"\u003e {{- else -}} \u003clink rel=\"shortcut icon\" type=\"image/x-icon\" href=\"/draft/favicon.ico\" /\u003e \u003clink rel=\"icon\" type=\"image/png\" sizes=\"32x32\" href=\"/draft/favicon-32x32.png\"\u003e \u003clink rel=\"icon\" type=\"image/png\" sizes=\"16x16\" href=\"/draft/favicon-16x16.png\"\u003e {{- end -}} \u003clink rel=\"apple-touch-icon\" sizes=\"180x180\" href=\"/draft/apple-touch-icon.png\"\u003e {{- with .Site.Params.app.iconColor -}} \u003clink rel=\"mask-icon\" href=\"/draft/safari-pinned-tab.svg\" color=\"{{ . }}\"\u003e {{- end -}} {{- if eq .Site.Params.enablePWA true -}} \u003clink rel=\"manifest\" href=\"/draft/site.webmanifest\"\u003e {{- end -}} {{- end -}} ","date":"2021-12-06","objectID":"/anr/posts/anr/:24:3","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#网站图标-1"},{"categories":null,"content":"补充缺失的中文译文 创建i18n/zh-CN.toml # Translations for Simplified Chinese # 简体中文的翻译 # https://gohugo.io/content-management/multilingual/#translation-of-strings [authors] other = \"作者\" ","date":"2021-12-06","objectID":"/anr/posts/anr/:24:4","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#补充缺失的中文译文-1"},{"categories":null,"content":"作者配置 创建data/authors/dnasdw.toml name = \"dnasdw\" link = \"https://github.com/dnasdw\" 之后就可以在文章的Front Matter中使用authors: [dnasdw]. ","date":"2021-12-06","objectID":"/anr/posts/anr/:24:5","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#作者配置-1"},{"categories":null,"content":"配置PWA 创建content/offline/index.md --- title: \"离线\" --- \u003e 你没有连接至互联网, 只有缓存的页面可用. 修改static/site.webmanifest, 添加start_url, 并填写name/short_name/start_url. { \"name\": \"聚草稿\", \"short_name\": \"聚草稿\", \"start_url\": \"/draft/\", \"icons\": [ { \"src\": \"/draft/android-chrome-192x192.png\", \"sizes\": \"192x192\", \"type\": \"image/png\" }, { \"src\": \"/draft/android-chrome-512x512.png\", \"sizes\": \"512x512\", \"type\": \"image/png\" } ], \"theme_color\": \"#ffffff\", \"background_color\": \"#ffffff\", \"display\": \"standalone\" } 如果config中baseURL包含子目录, 则需要将themes/DoIt/assets/js/sw.js复制到assets/js/sw.js, 并将相关链接前加上/子目录名, 比如/css/style.min.css改为/darft/css/style.min.css; 同样修改static/site.webmanifest中的相关路径, 其中start_url从/改为/子目录名/, 比如\"start_url\": \"/\"改为\"start_url\": \"/draft/\"; 还需要将themes/DoIt/layouts/partials/footer.html复制到layouts/partials/footer.html, 并修改注册参数, 比如.register('/sw.min.js', { scope: '/' })改为.register('/draft/sw.min.js', { scope: '/draft/' }). 配置参考 const BASE_CACHE_FILES = [ '/draft/css/style.min.css', '/draft/js/theme.min.js', '/draft/site.webmanifest' ] const OFFLINE_CACHE_FILES = [ '/draft/css/style.min.css', '/draft/js/theme.min.js', '/draft/site.webmanifest', '/draft/offline' ] const NOT_FOUND_CACHE_FILES = [ '/draft/css/style.min.css', '/draft/js/theme.min.js', '/draft/site.webmanifest', '/draft/404.html' ] const OFFLINE_PAGE = '/draft/offline' const NOT_FOUND_PAGE = '/draft/404.html' ","date":"2021-12-06","objectID":"/anr/posts/anr/:24:6","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#配置pwa-1"},{"categories":null,"content":"安装静态网站生成器hugo-extended 官方教程 https://gohugo.io/getting-started/installing/ ","date":"2021-12-06","objectID":"/anr/posts/anr/:25:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#安装静态网站生成器hugo-extended-2"},{"categories":null,"content":"创建或使用守望者仓库watcher_test https://github.com/new https://github.com/dnasdw/watcher_test ","date":"2021-12-06","objectID":"/anr/posts/anr/:26:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#创建或使用守望者仓库watcher_test-2"},{"categories":null,"content":"创建部署仓库draft https://github.com/new https://github.com/dnasdw/draft ","date":"2021-12-06","objectID":"/anr/posts/anr/:27:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#创建部署仓库draft-2"},{"categories":null,"content":"创建评论仓库comments_test https://github.com/new https://github.com/dnasdw/comments_test ","date":"2021-12-06","objectID":"/anr/posts/anr/:28:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#创建评论仓库comments_test-2"},{"categories":null,"content":"创建源文件仓库pages_draft https://github.com/new https://github.com/dnasdw/pages_draft 克隆到本地并新建站点 git clone --recursive https://github.com/dnasdw/pages_draft.git hugo new site pages_draft --force cd pages_draft 创建.gitignore 内容来自https://github.com/github/gitignore/blob/main/community/Golang/Hugo.gitignore # Generated files by hugo /public/ /resources/_gen/ /assets/jsconfig.json hugo_stats.json # Executable may be added to repository hugo.exe hugo.darwin hugo.linux # Temporary lock file while building /.hugo_build.lock 添加主题 git submodule add https://github.com/dnasdw/DoIt.git themes/DoIt 修改config.toml baseURL = \"https://dnasdw.github.io/draft\" defaultContentLanguage = \"zh-cn\" theme = \"DoIt\" title = \"聚草稿\" [languages] [languages.zh-cn] languageCode = \"zh-CN\" hasCJKLanguage = true [params] version = \"0.2.X\" 提交推送 git add * git commit -m setup git push origin master ","date":"2021-12-06","objectID":"/anr/posts/anr/:29:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#创建源文件仓库pages_draft-2"},{"categories":null,"content":"创建MY_GITHUB_TOKEN 查看是否已有token https://github.com/settings/tokens 如果没有则新建token https://github.com/settings/tokens/new 配置参考 Note: actions-gh-pages Expiration: No expiration Select scopes: [v] repo ","date":"2021-12-06","objectID":"/anr/posts/anr/:30:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#创建my_github_token-2"},{"categories":null,"content":"把MY_GITHUB_TOKEN配置到守望者仓库中 查看是否已配置token https://github.com/dnasdw/watcher_test/settings/secrets/actions 如果没有则配置token https://github.com/dnasdw/watcher_test/settings/secrets/actions/new 配置参考 MY_GITHUB_TOKEN: ghp_* ","date":"2021-12-06","objectID":"/anr/posts/anr/:31:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#把my_github_token配置到守望者仓库中-2"},{"categories":null,"content":"配置守望者 克隆到本地 git clone --recursive https://github.com/dnasdw/watcher_test.git cd watcher_test git submodule add https://github.com/dnasdw/pages_draft.git pages_draft 创建github actions配置.github/workflows/draft-gh-pages.yml 配置参考 name:GitHub Pageson:workflow_dispatch:inputs:commit_id:description:The branch, tag or SHA of the submodule to checkout.required:falsedefault:push:branches:- masterjobs:deploy:runs-on:ubuntu-20.04concurrency:group:${{ github.workflow }}-${{ github.ref }}steps:- uses:actions/checkout@v2with:token:${{ secrets.MY_GITHUB_TOKEN }}submodules:recursivefetch-depth:0- name:Checkout submodule with github tokenif:${{ github.event.inputs.commit_id != '' }}uses:actions/checkout@v2with:repository:dnasdw/pages_draftpath:pages_draftref:${{ github.event.inputs.commit_id }}token:${{ secrets.MY_GITHUB_TOKEN }}submodules:recursivefetch-depth:0- name:Get full commit message like peaceiris/actions-gh-pages@v3working-directory:./pages_draftrun:|printf -v FULL_COMMIT_MESSAGE %s \"$(git log -1 --pretty=format:%B) dnasdw/pages_draft@$(git log -1 --pretty=format:%H)\" echo \"$FULL_COMMIT_MESSAGE\" echo \"FULL_COMMIT_MESSAGE\u003c\u003cEOF\" \u003e\u003e $GITHUB_ENV echo \"$FULL_COMMIT_MESSAGE\" \u003e\u003e $GITHUB_ENV echo \"EOF\" \u003e\u003e $GITHUB_ENV- name:Disable quotePathworking-directory:./pages_draftrun:git config core.quotePath false- name:Setup Hugouses:peaceiris/actions-hugo@v2with:hugo-version:latestextended:true- name:Buildworking-directory:./pages_draftrun:hugo --minify- name:Deployuses:peaceiris/actions-gh-pages@v3if:${{ github.ref == 'refs/heads/master' }}with:personal_token:${{ secrets.MY_GITHUB_TOKEN }}external_repository:dnasdw/draftpublish_branch:gh-pagespublish_dir:./pages_draft/publicforce_orphan:falseuser_name:Sun Daowenuser_email:sundaowen@gmail.comfull_commit_message:${{ env.FULL_COMMIT_MESSAGE }} 提交推送 git add * git commit -m \"setup pages\" git push origin master ","date":"2021-12-06","objectID":"/anr/posts/anr/:32:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#配置守望者-2"},{"categories":null,"content":"配置中转worker 教程 https://github.com/dnasdw/workflow_dispatch-worker 配置参考 GITHUB_WEBHOOK_SECRET: 2008* Payload URL: https://webhook_workflow_dispatch-worker.dnasdw.workers.dev/api/github/repos/dnasdw/watcher_test/actions/workflows/draft-gh-pages.yml/dispatches ","date":"2021-12-06","objectID":"/anr/posts/anr/:33:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#配置中转worker-2"},{"categories":null,"content":"github pages地址 配置地址 https://github.com/dnasdw/draft/settings/pages 页面地址 https://dnasdw.github.io/draft/ ","date":"2021-12-06","objectID":"/anr/posts/anr/:34:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#github-pages地址-2"},{"categories":null,"content":"安装评论系统 https://utteranc.es/ 应用地址 https://github.com/apps/utterances 配置权限 Only select repositories: dnasdw/comments_test ","date":"2021-12-06","objectID":"/anr/posts/anr/:35:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#安装评论系统-2"},{"categories":null,"content":"更新config 配置参考 baseURL = \"https://dnasdw.github.io/draft\" # [en, zh-cn, fr, pl, ...] determines default content language # [en, zh-cn, fr, pl, ...] 设置默认的语言 defaultContentLanguage = \"zh-cn\" # theme # 主题 theme = \"DoIt\" # themes directory # 主题目录 # themesDir = \"themes\" # website title # 网站标题 # TODO title = \"聚草稿\" # whether to use robots.txt # 是否使用 robots.txt enableRobotsTXT = true # whether to use git commit log # 是否使用 git 信息 enableGitInfo = true # whether to use emoji code # 是否使用 emoji 代码 enableEmoji = true [languages] [languages.zh-cn] weight = 1 # 网站语言, 仅在这里 CN 大写 languageCode = \"zh-CN\" # 语言名称 languageName = \"简体中文\" # 是否包括中日韩文字 hasCJKLanguage = true # 默认每页列表显示的文章数目 paginate = 10 # [UA-XXXXXXXX-X] 谷歌分析代号 googleAnalytics = \"\" # 版权描述，仅仅用于 SEO copyright = \"This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.\" # 菜单配置 [languages.zh-cn.menu] [[languages.zh-cn.menu.main]] identifier = \"posts\" # 你可以在名称 (允许 HTML 格式) 之前添加其他信息, 例如图标 pre = \"\" # 你可以在名称 (允许 HTML 格式) 之后添加其他信息, 例如图标 post = \"\" name = \"所有文章\" url = \"posts/\" title = \"\" weight = 1 [[languages.zh-cn.menu.main]] identifier = \"tags\" pre = \"\" post = \"\" name = \"标签\" url = \"tags/\" title = \"\" weight = 2 [[languages.zh-cn.menu.main]] identifier = \"categories\" pre = \"\" post = \"\" name = \"分类\" url = \"categories/\" title = \"\" weight = 3 [[languages.zh-cn.menu.main]] identifier = \"series\" pre = \"\" post = \"\" name = \"系列\" url = \"series/\" title = \"\" weight = 4 [[languages.zh-cn.menu.main]] identifier = \"authors\" pre = \"\" post = \"\" name = \"作者\" url = \"authors/\" title = \"\" weight = 5 # TODO [[languages.zh-cn.menu.main]] identifier = \"github\" pre = \"\u003ci class='fab fa-github fa-fw'\u003e\u003c/i\u003e\" post = \"\" name = \"\" url = \"https://github.com/dnasdw/draft\" title = \"GitHub\" weight = 9 [languages.zh-cn.params] # 网站描述 # TODO description = \"聚草稿\" # 网站关键词 # TODO keywords = [\"聚草稿\", \"\"] # 应用图标配置 [languages.zh-cn.params.app] # 当添加到 iOS 主屏幕或者 Android 启动器时的标题, 覆盖默认标题 # TODO title = \"聚草稿\" # 是否隐藏网站图标资源链接 noFavicon = false # 更现代的 SVG 网站图标, 可替代旧的 .png 和 .ico 文件 svgFavicon = \"\" # Safari 图标颜色 iconColor = \"#5bbad5\" # Windows v8-10 磁贴颜色 tileColor = \"#da532c\" # 搜索配置 [languages.zh-cn.params.search] enable = true # 搜索引擎的类型 (\"lunr\", \"algolia\", \"fuse\") type = \"fuse\" # 文章内容最长索引长度 contentLength = 4000 # 搜索框的占位提示语 placeholder = \"\" # 最大结果数目 maxResultLength = 10 # 结果内容片段长度 snippetLength = 50 # 搜索结果中高亮部分的 HTML 标签 highlightTag = \"em\" # 是否在搜索索引中使用基于 baseURL 的绝对路径 absoluteURL = false [languages.zh-cn.params.search.algolia] index = \"\" appID = \"\" searchKey = \"\" [languages.zh-cn.params.search.fuse] # https://fusejs.io/api/options.html isCaseSensitive = false minMatchCharLength = 1 findAllMatches = false location = 0 threshold = 0.1 distance = 100 ignoreLocation = true useExtendedSearch = false ignoreFieldNorm = false # 主页信息设置 [languages.zh-cn.params.home] # RSS 文章数目 rss = 10 # 主页个人信息 [languages.zh-cn.params.home.profile] enable = true # Gravatar 邮箱，用于优先在主页显示的头像 gravatarEmail = \"\" # 主页显示头像的 URL avatarURL = \"/images/dnasdw256.png\" # 主页显示的网站标题 (支持 HTML 格式) title = \"\" # 主页显示的网站副标题 # TODO subtitle = \"\" # 是否为副标题显示打字机动画 typeit = false # 是否显示社交账号 social = true # 免责声明 (支持 HTML 格式) disclaimer = \"\" # 主页文章列表 [languages.zh-cn.params.home.posts] enable = true # 主页每页显示文章数量 paginate = 10 # 主页的社交信息设置 [languages.zh-cn.params.social] GitHub = \"dnasdw\" Linkedin = \"\" Twitter = \"sundaowen\" Instagram = \"\" Facebook = \"\" Telegram = \"\" Medium = \"\" Gitlab = \"dnasdw\" Youtubelegacy = \"\" Youtubecustom = \"\" Youtubechannel = \"\" Tumblr = \"\" Quora = \"\" Keybase = \"\" Pinterest = \"\" Reddit = \"\" Codepen = \"\" FreeCodeCamp = \"\" Bitbucket = \"dnasdw\" Stackoverflow = \"\" Weibo = \"dnasdw\" Odnoklassniki = \"\" VK = \"\" Flickr = \"\" Xing = \"\" Snapchat = \"\" Soundcloud = \"\" Spotify = \"\" Bandcamp = \"\" Paypal = \"\" Fivehundredpx = \"\" Mix = \"\" Goodreads = \"\" Lastfm = \"\" Foursquare = \"\" Hackernews = \"\" Kickstarter = \"\" Patreon = \"\" Steam = \"dnasdw\" Twitch = \"\" Strava = \"\" Skype = \"\" Whatsapp = \"\" Zhihu = \"dnasdw\" Douban = \"\" Angellist = \"\" Slidershare = \"\" Jsfiddle =","date":"2021-12-06","objectID":"/anr/posts/anr/:36:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#更新config-2"},{"categories":null,"content":"菜单url 如果config中baseURL包含子目录, 则menu配置中的url不能以斜杠开始, 比如\"所有文章\"的url不可以为/posts/, 但可以为posts/或./posts/. ","date":"2021-12-06","objectID":"/anr/posts/anr/:36:1","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#菜单url-2"},{"categories":null,"content":"头像文件 创建assets/images/dnasdw256.png, 并将config中的头像路径改为/images/dnasdw256.png. ","date":"2021-12-06","objectID":"/anr/posts/anr/:36:2","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#头像文件-2"},{"categories":null,"content":"网站图标 准备一个512x512的图标, 比如去https://www.flaticon.com/搜索一个合适的. 去https://realfavicongenerator.net/上传图标, 下载得到图标配置包, 解压到static目录. 如果config中baseURL包含子目录, 则需要将themes/DoIt/layouts/partials/head/link.html复制到layouts/partials/head/link.html, 并将favicon部分的链接前加上/子目录名, 比如href=\"/favicon.ico\"改为href=\"/draft/favicon.ico\". 配置参考 {{- if not .Site.Params.app.noFavicon -}} {{- with .Site.Params.app.svgFavicon -}} \u003clink rel=\"icon\" href=\"{{ . }}\"\u003e {{- else -}} \u003clink rel=\"shortcut icon\" type=\"image/x-icon\" href=\"/draft/favicon.ico\" /\u003e \u003clink rel=\"icon\" type=\"image/png\" sizes=\"32x32\" href=\"/draft/favicon-32x32.png\"\u003e \u003clink rel=\"icon\" type=\"image/png\" sizes=\"16x16\" href=\"/draft/favicon-16x16.png\"\u003e {{- end -}} \u003clink rel=\"apple-touch-icon\" sizes=\"180x180\" href=\"/draft/apple-touch-icon.png\"\u003e {{- with .Site.Params.app.iconColor -}} \u003clink rel=\"mask-icon\" href=\"/draft/safari-pinned-tab.svg\" color=\"{{ . }}\"\u003e {{- end -}} {{- if eq .Site.Params.enablePWA true -}} \u003clink rel=\"manifest\" href=\"/draft/site.webmanifest\"\u003e {{- end -}} {{- end -}} ","date":"2021-12-06","objectID":"/anr/posts/anr/:36:3","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#网站图标-2"},{"categories":null,"content":"补充缺失的中文译文 创建i18n/zh-CN.toml # Translations for Simplified Chinese # 简体中文的翻译 # https://gohugo.io/content-management/multilingual/#translation-of-strings [authors] other = \"作者\" ","date":"2021-12-06","objectID":"/anr/posts/anr/:36:4","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#补充缺失的中文译文-2"},{"categories":null,"content":"作者配置 创建data/authors/dnasdw.toml name = \"dnasdw\" link = \"https://github.com/dnasdw\" 之后就可以在文章的Front Matter中使用authors: [dnasdw]. ","date":"2021-12-06","objectID":"/anr/posts/anr/:36:5","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#作者配置-2"},{"categories":null,"content":"配置PWA 创建content/offline/index.md --- title: \"离线\" --- \u003e 你没有连接至互联网, 只有缓存的页面可用. 修改static/site.webmanifest, 添加start_url, 并填写name/short_name/start_url. { \"name\": \"聚草稿\", \"short_name\": \"聚草稿\", \"start_url\": \"/draft/\", \"icons\": [ { \"src\": \"/draft/android-chrome-192x192.png\", \"sizes\": \"192x192\", \"type\": \"image/png\" }, { \"src\": \"/draft/android-chrome-512x512.png\", \"sizes\": \"512x512\", \"type\": \"image/png\" } ], \"theme_color\": \"#ffffff\", \"background_color\": \"#ffffff\", \"display\": \"standalone\" } 如果config中baseURL包含子目录, 则需要将themes/DoIt/assets/js/sw.js复制到assets/js/sw.js, 并将相关链接前加上/子目录名, 比如/css/style.min.css改为/darft/css/style.min.css; 同样修改static/site.webmanifest中的相关路径, 其中start_url从/改为/子目录名/, 比如\"start_url\": \"/\"改为\"start_url\": \"/draft/\"; 还需要将themes/DoIt/layouts/partials/footer.html复制到layouts/partials/footer.html, 并修改注册参数, 比如.register('/sw.min.js', { scope: '/' })改为.register('/draft/sw.min.js', { scope: '/draft/' }). 配置参考 const BASE_CACHE_FILES = [ '/draft/css/style.min.css', '/draft/js/theme.min.js', '/draft/site.webmanifest' ] const OFFLINE_CACHE_FILES = [ '/draft/css/style.min.css', '/draft/js/theme.min.js', '/draft/site.webmanifest', '/draft/offline' ] const NOT_FOUND_CACHE_FILES = [ '/draft/css/style.min.css', '/draft/js/theme.min.js', '/draft/site.webmanifest', '/draft/404.html' ] const OFFLINE_PAGE = '/draft/offline' const NOT_FOUND_PAGE = '/draft/404.html' ","date":"2021-12-06","objectID":"/anr/posts/anr/:36:6","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#配置pwa-2"},{"categories":null,"content":"安装静态网站生成器hugo-extended 官方教程 https://gohugo.io/getting-started/installing/ ","date":"2021-12-06","objectID":"/anr/posts/anr/:37:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#安装静态网站生成器hugo-extended-3"},{"categories":null,"content":"创建或使用守望者仓库watcher_test https://github.com/new https://github.com/dnasdw/watcher_test ","date":"2021-12-06","objectID":"/anr/posts/anr/:38:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#创建或使用守望者仓库watcher_test-3"},{"categories":null,"content":"创建部署仓库draft https://github.com/new https://github.com/dnasdw/draft ","date":"2021-12-06","objectID":"/anr/posts/anr/:39:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#创建部署仓库draft-3"},{"categories":null,"content":"创建评论仓库comments_test https://github.com/new https://github.com/dnasdw/comments_test ","date":"2021-12-06","objectID":"/anr/posts/anr/:40:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#创建评论仓库comments_test-3"},{"categories":null,"content":"创建源文件仓库pages_draft https://github.com/new https://github.com/dnasdw/pages_draft 克隆到本地并新建站点 git clone --recursive https://github.com/dnasdw/pages_draft.git hugo new site pages_draft --force cd pages_draft 创建.gitignore 内容来自https://github.com/github/gitignore/blob/main/community/Golang/Hugo.gitignore # Generated files by hugo /public/ /resources/_gen/ /assets/jsconfig.json hugo_stats.json # Executable may be added to repository hugo.exe hugo.darwin hugo.linux # Temporary lock file while building /.hugo_build.lock 添加主题 git submodule add https://github.com/dnasdw/DoIt.git themes/DoIt 修改config.toml baseURL = \"https://dnasdw.github.io/draft\" defaultContentLanguage = \"zh-cn\" theme = \"DoIt\" title = \"聚草稿\" [languages] [languages.zh-cn] languageCode = \"zh-CN\" hasCJKLanguage = true [params] version = \"0.2.X\" 提交推送 git add * git commit -m setup git push origin master ","date":"2021-12-06","objectID":"/anr/posts/anr/:41:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#创建源文件仓库pages_draft-3"},{"categories":null,"content":"创建MY_GITHUB_TOKEN 查看是否已有token https://github.com/settings/tokens 如果没有则新建token https://github.com/settings/tokens/new 配置参考 Note: actions-gh-pages Expiration: No expiration Select scopes: [v] repo ","date":"2021-12-06","objectID":"/anr/posts/anr/:42:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#创建my_github_token-3"},{"categories":null,"content":"把MY_GITHUB_TOKEN配置到守望者仓库中 查看是否已配置token https://github.com/dnasdw/watcher_test/settings/secrets/actions 如果没有则配置token https://github.com/dnasdw/watcher_test/settings/secrets/actions/new 配置参考 MY_GITHUB_TOKEN: ghp_* ","date":"2021-12-06","objectID":"/anr/posts/anr/:43:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#把my_github_token配置到守望者仓库中-3"},{"categories":null,"content":"配置守望者 克隆到本地 git clone --recursive https://github.com/dnasdw/watcher_test.git cd watcher_test git submodule add https://github.com/dnasdw/pages_draft.git pages_draft 创建github actions配置.github/workflows/draft-gh-pages.yml 配置参考 name:GitHub Pageson:workflow_dispatch:inputs:commit_id:description:The branch, tag or SHA of the submodule to checkout.required:falsedefault:push:branches:- masterjobs:deploy:runs-on:ubuntu-20.04concurrency:group:${{ github.workflow }}-${{ github.ref }}steps:- uses:actions/checkout@v2with:token:${{ secrets.MY_GITHUB_TOKEN }}submodules:recursivefetch-depth:0- name:Checkout submodule with github tokenif:${{ github.event.inputs.commit_id != '' }}uses:actions/checkout@v2with:repository:dnasdw/pages_draftpath:pages_draftref:${{ github.event.inputs.commit_id }}token:${{ secrets.MY_GITHUB_TOKEN }}submodules:recursivefetch-depth:0- name:Get full commit message like peaceiris/actions-gh-pages@v3working-directory:./pages_draftrun:|printf -v FULL_COMMIT_MESSAGE %s \"$(git log -1 --pretty=format:%B) dnasdw/pages_draft@$(git log -1 --pretty=format:%H)\" echo \"$FULL_COMMIT_MESSAGE\" echo \"FULL_COMMIT_MESSAGE\u003c\u003cEOF\" \u003e\u003e $GITHUB_ENV echo \"$FULL_COMMIT_MESSAGE\" \u003e\u003e $GITHUB_ENV echo \"EOF\" \u003e\u003e $GITHUB_ENV- name:Disable quotePathworking-directory:./pages_draftrun:git config core.quotePath false- name:Setup Hugouses:peaceiris/actions-hugo@v2with:hugo-version:latestextended:true- name:Buildworking-directory:./pages_draftrun:hugo --minify- name:Deployuses:peaceiris/actions-gh-pages@v3if:${{ github.ref == 'refs/heads/master' }}with:personal_token:${{ secrets.MY_GITHUB_TOKEN }}external_repository:dnasdw/draftpublish_branch:gh-pagespublish_dir:./pages_draft/publicforce_orphan:falseuser_name:Sun Daowenuser_email:sundaowen@gmail.comfull_commit_message:${{ env.FULL_COMMIT_MESSAGE }} 提交推送 git add * git commit -m \"setup pages\" git push origin master ","date":"2021-12-06","objectID":"/anr/posts/anr/:44:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#配置守望者-3"},{"categories":null,"content":"配置中转worker 教程 https://github.com/dnasdw/workflow_dispatch-worker 配置参考 GITHUB_WEBHOOK_SECRET: 2008* Payload URL: https://webhook_workflow_dispatch-worker.dnasdw.workers.dev/api/github/repos/dnasdw/watcher_test/actions/workflows/draft-gh-pages.yml/dispatches ","date":"2021-12-06","objectID":"/anr/posts/anr/:45:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#配置中转worker-3"},{"categories":null,"content":"github pages地址 配置地址 https://github.com/dnasdw/draft/settings/pages 页面地址 https://dnasdw.github.io/draft/ ","date":"2021-12-06","objectID":"/anr/posts/anr/:46:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#github-pages地址-3"},{"categories":null,"content":"安装评论系统 https://utteranc.es/ 应用地址 https://github.com/apps/utterances 配置权限 Only select repositories: dnasdw/comments_test ","date":"2021-12-06","objectID":"/anr/posts/anr/:47:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#安装评论系统-3"},{"categories":null,"content":"更新config 配置参考 baseURL = \"https://dnasdw.github.io/draft\" # [en, zh-cn, fr, pl, ...] determines default content language # [en, zh-cn, fr, pl, ...] 设置默认的语言 defaultContentLanguage = \"zh-cn\" # theme # 主题 theme = \"DoIt\" # themes directory # 主题目录 # themesDir = \"themes\" # website title # 网站标题 # TODO title = \"聚草稿\" # whether to use robots.txt # 是否使用 robots.txt enableRobotsTXT = true # whether to use git commit log # 是否使用 git 信息 enableGitInfo = true # whether to use emoji code # 是否使用 emoji 代码 enableEmoji = true [languages] [languages.zh-cn] weight = 1 # 网站语言, 仅在这里 CN 大写 languageCode = \"zh-CN\" # 语言名称 languageName = \"简体中文\" # 是否包括中日韩文字 hasCJKLanguage = true # 默认每页列表显示的文章数目 paginate = 10 # [UA-XXXXXXXX-X] 谷歌分析代号 googleAnalytics = \"\" # 版权描述，仅仅用于 SEO copyright = \"This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.\" # 菜单配置 [languages.zh-cn.menu] [[languages.zh-cn.menu.main]] identifier = \"posts\" # 你可以在名称 (允许 HTML 格式) 之前添加其他信息, 例如图标 pre = \"\" # 你可以在名称 (允许 HTML 格式) 之后添加其他信息, 例如图标 post = \"\" name = \"所有文章\" url = \"posts/\" title = \"\" weight = 1 [[languages.zh-cn.menu.main]] identifier = \"tags\" pre = \"\" post = \"\" name = \"标签\" url = \"tags/\" title = \"\" weight = 2 [[languages.zh-cn.menu.main]] identifier = \"categories\" pre = \"\" post = \"\" name = \"分类\" url = \"categories/\" title = \"\" weight = 3 [[languages.zh-cn.menu.main]] identifier = \"series\" pre = \"\" post = \"\" name = \"系列\" url = \"series/\" title = \"\" weight = 4 [[languages.zh-cn.menu.main]] identifier = \"authors\" pre = \"\" post = \"\" name = \"作者\" url = \"authors/\" title = \"\" weight = 5 # TODO [[languages.zh-cn.menu.main]] identifier = \"github\" pre = \"\u003ci class='fab fa-github fa-fw'\u003e\u003c/i\u003e\" post = \"\" name = \"\" url = \"https://github.com/dnasdw/draft\" title = \"GitHub\" weight = 9 [languages.zh-cn.params] # 网站描述 # TODO description = \"聚草稿\" # 网站关键词 # TODO keywords = [\"聚草稿\", \"\"] # 应用图标配置 [languages.zh-cn.params.app] # 当添加到 iOS 主屏幕或者 Android 启动器时的标题, 覆盖默认标题 # TODO title = \"聚草稿\" # 是否隐藏网站图标资源链接 noFavicon = false # 更现代的 SVG 网站图标, 可替代旧的 .png 和 .ico 文件 svgFavicon = \"\" # Safari 图标颜色 iconColor = \"#5bbad5\" # Windows v8-10 磁贴颜色 tileColor = \"#da532c\" # 搜索配置 [languages.zh-cn.params.search] enable = true # 搜索引擎的类型 (\"lunr\", \"algolia\", \"fuse\") type = \"fuse\" # 文章内容最长索引长度 contentLength = 4000 # 搜索框的占位提示语 placeholder = \"\" # 最大结果数目 maxResultLength = 10 # 结果内容片段长度 snippetLength = 50 # 搜索结果中高亮部分的 HTML 标签 highlightTag = \"em\" # 是否在搜索索引中使用基于 baseURL 的绝对路径 absoluteURL = false [languages.zh-cn.params.search.algolia] index = \"\" appID = \"\" searchKey = \"\" [languages.zh-cn.params.search.fuse] # https://fusejs.io/api/options.html isCaseSensitive = false minMatchCharLength = 1 findAllMatches = false location = 0 threshold = 0.1 distance = 100 ignoreLocation = true useExtendedSearch = false ignoreFieldNorm = false # 主页信息设置 [languages.zh-cn.params.home] # RSS 文章数目 rss = 10 # 主页个人信息 [languages.zh-cn.params.home.profile] enable = true # Gravatar 邮箱，用于优先在主页显示的头像 gravatarEmail = \"\" # 主页显示头像的 URL avatarURL = \"/images/dnasdw256.png\" # 主页显示的网站标题 (支持 HTML 格式) title = \"\" # 主页显示的网站副标题 # TODO subtitle = \"\" # 是否为副标题显示打字机动画 typeit = false # 是否显示社交账号 social = true # 免责声明 (支持 HTML 格式) disclaimer = \"\" # 主页文章列表 [languages.zh-cn.params.home.posts] enable = true # 主页每页显示文章数量 paginate = 10 # 主页的社交信息设置 [languages.zh-cn.params.social] GitHub = \"dnasdw\" Linkedin = \"\" Twitter = \"sundaowen\" Instagram = \"\" Facebook = \"\" Telegram = \"\" Medium = \"\" Gitlab = \"dnasdw\" Youtubelegacy = \"\" Youtubecustom = \"\" Youtubechannel = \"\" Tumblr = \"\" Quora = \"\" Keybase = \"\" Pinterest = \"\" Reddit = \"\" Codepen = \"\" FreeCodeCamp = \"\" Bitbucket = \"dnasdw\" Stackoverflow = \"\" Weibo = \"dnasdw\" Odnoklassniki = \"\" VK = \"\" Flickr = \"\" Xing = \"\" Snapchat = \"\" Soundcloud = \"\" Spotify = \"\" Bandcamp = \"\" Paypal = \"\" Fivehundredpx = \"\" Mix = \"\" Goodreads = \"\" Lastfm = \"\" Foursquare = \"\" Hackernews = \"\" Kickstarter = \"\" Patreon = \"\" Steam = \"dnasdw\" Twitch = \"\" Strava = \"\" Skype = \"\" Whatsapp = \"\" Zhihu = \"dnasdw\" Douban = \"\" Angellist = \"\" Slidershare = \"\" Jsfiddle =","date":"2021-12-06","objectID":"/anr/posts/anr/:48:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#更新config-3"},{"categories":null,"content":"菜单url 如果config中baseURL包含子目录, 则menu配置中的url不能以斜杠开始, 比如\"所有文章\"的url不可以为/posts/, 但可以为posts/或./posts/. ","date":"2021-12-06","objectID":"/anr/posts/anr/:48:1","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#菜单url-3"},{"categories":null,"content":"头像文件 创建assets/images/dnasdw256.png, 并将config中的头像路径改为/images/dnasdw256.png. ","date":"2021-12-06","objectID":"/anr/posts/anr/:48:2","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#头像文件-3"},{"categories":null,"content":"网站图标 准备一个512x512的图标, 比如去https://www.flaticon.com/搜索一个合适的. 去https://realfavicongenerator.net/上传图标, 下载得到图标配置包, 解压到static目录. 如果config中baseURL包含子目录, 则需要将themes/DoIt/layouts/partials/head/link.html复制到layouts/partials/head/link.html, 并将favicon部分的链接前加上/子目录名, 比如href=\"/favicon.ico\"改为href=\"/draft/favicon.ico\". 配置参考 {{- if not .Site.Params.app.noFavicon -}} {{- with .Site.Params.app.svgFavicon -}} \u003clink rel=\"icon\" href=\"{{ . }}\"\u003e {{- else -}} \u003clink rel=\"shortcut icon\" type=\"image/x-icon\" href=\"/draft/favicon.ico\" /\u003e \u003clink rel=\"icon\" type=\"image/png\" sizes=\"32x32\" href=\"/draft/favicon-32x32.png\"\u003e \u003clink rel=\"icon\" type=\"image/png\" sizes=\"16x16\" href=\"/draft/favicon-16x16.png\"\u003e {{- end -}} \u003clink rel=\"apple-touch-icon\" sizes=\"180x180\" href=\"/draft/apple-touch-icon.png\"\u003e {{- with .Site.Params.app.iconColor -}} \u003clink rel=\"mask-icon\" href=\"/draft/safari-pinned-tab.svg\" color=\"{{ . }}\"\u003e {{- end -}} {{- if eq .Site.Params.enablePWA true -}} \u003clink rel=\"manifest\" href=\"/draft/site.webmanifest\"\u003e {{- end -}} {{- end -}} ","date":"2021-12-06","objectID":"/anr/posts/anr/:48:3","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#网站图标-3"},{"categories":null,"content":"补充缺失的中文译文 创建i18n/zh-CN.toml # Translations for Simplified Chinese # 简体中文的翻译 # https://gohugo.io/content-management/multilingual/#translation-of-strings [authors] other = \"作者\" ","date":"2021-12-06","objectID":"/anr/posts/anr/:48:4","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#补充缺失的中文译文-3"},{"categories":null,"content":"作者配置 创建data/authors/dnasdw.toml name = \"dnasdw\" link = \"https://github.com/dnasdw\" 之后就可以在文章的Front Matter中使用authors: [dnasdw]. ","date":"2021-12-06","objectID":"/anr/posts/anr/:48:5","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#作者配置-3"},{"categories":null,"content":"配置PWA 创建content/offline/index.md --- title: \"离线\" --- \u003e 你没有连接至互联网, 只有缓存的页面可用. 修改static/site.webmanifest, 添加start_url, 并填写name/short_name/start_url. { \"name\": \"聚草稿\", \"short_name\": \"聚草稿\", \"start_url\": \"/draft/\", \"icons\": [ { \"src\": \"/draft/android-chrome-192x192.png\", \"sizes\": \"192x192\", \"type\": \"image/png\" }, { \"src\": \"/draft/android-chrome-512x512.png\", \"sizes\": \"512x512\", \"type\": \"image/png\" } ], \"theme_color\": \"#ffffff\", \"background_color\": \"#ffffff\", \"display\": \"standalone\" } 如果config中baseURL包含子目录, 则需要将themes/DoIt/assets/js/sw.js复制到assets/js/sw.js, 并将相关链接前加上/子目录名, 比如/css/style.min.css改为/darft/css/style.min.css; 同样修改static/site.webmanifest中的相关路径, 其中start_url从/改为/子目录名/, 比如\"start_url\": \"/\"改为\"start_url\": \"/draft/\"; 还需要将themes/DoIt/layouts/partials/footer.html复制到layouts/partials/footer.html, 并修改注册参数, 比如.register('/sw.min.js', { scope: '/' })改为.register('/draft/sw.min.js', { scope: '/draft/' }). 配置参考 const BASE_CACHE_FILES = [ '/draft/css/style.min.css', '/draft/js/theme.min.js', '/draft/site.webmanifest' ] const OFFLINE_CACHE_FILES = [ '/draft/css/style.min.css', '/draft/js/theme.min.js', '/draft/site.webmanifest', '/draft/offline' ] const NOT_FOUND_CACHE_FILES = [ '/draft/css/style.min.css', '/draft/js/theme.min.js', '/draft/site.webmanifest', '/draft/404.html' ] const OFFLINE_PAGE = '/draft/offline' const NOT_FOUND_PAGE = '/draft/404.html' ","date":"2021-12-06","objectID":"/anr/posts/anr/:48:6","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#配置pwa-3"},{"categories":null,"content":"安装静态网站生成器hugo-extended 官方教程 https://gohugo.io/getting-started/installing/ ","date":"2021-12-06","objectID":"/anr/posts/anr/:49:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#安装静态网站生成器hugo-extended-4"},{"categories":null,"content":"创建或使用守望者仓库watcher_test https://github.com/new https://github.com/dnasdw/watcher_test ","date":"2021-12-06","objectID":"/anr/posts/anr/:50:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#创建或使用守望者仓库watcher_test-4"},{"categories":null,"content":"创建部署仓库draft https://github.com/new https://github.com/dnasdw/draft ","date":"2021-12-06","objectID":"/anr/posts/anr/:51:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#创建部署仓库draft-4"},{"categories":null,"content":"创建评论仓库comments_test https://github.com/new https://github.com/dnasdw/comments_test ","date":"2021-12-06","objectID":"/anr/posts/anr/:52:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#创建评论仓库comments_test-4"},{"categories":null,"content":"创建源文件仓库pages_draft https://github.com/new https://github.com/dnasdw/pages_draft 克隆到本地并新建站点 git clone --recursive https://github.com/dnasdw/pages_draft.git hugo new site pages_draft --force cd pages_draft 创建.gitignore 内容来自https://github.com/github/gitignore/blob/main/community/Golang/Hugo.gitignore # Generated files by hugo /public/ /resources/_gen/ /assets/jsconfig.json hugo_stats.json # Executable may be added to repository hugo.exe hugo.darwin hugo.linux # Temporary lock file while building /.hugo_build.lock 添加主题 git submodule add https://github.com/dnasdw/DoIt.git themes/DoIt 修改config.toml baseURL = \"https://dnasdw.github.io/draft\" defaultContentLanguage = \"zh-cn\" theme = \"DoIt\" title = \"聚草稿\" [languages] [languages.zh-cn] languageCode = \"zh-CN\" hasCJKLanguage = true [params] version = \"0.2.X\" 提交推送 git add * git commit -m setup git push origin master ","date":"2021-12-06","objectID":"/anr/posts/anr/:53:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#创建源文件仓库pages_draft-4"},{"categories":null,"content":"创建MY_GITHUB_TOKEN 查看是否已有token https://github.com/settings/tokens 如果没有则新建token https://github.com/settings/tokens/new 配置参考 Note: actions-gh-pages Expiration: No expiration Select scopes: [v] repo ","date":"2021-12-06","objectID":"/anr/posts/anr/:54:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#创建my_github_token-4"},{"categories":null,"content":"把MY_GITHUB_TOKEN配置到守望者仓库中 查看是否已配置token https://github.com/dnasdw/watcher_test/settings/secrets/actions 如果没有则配置token https://github.com/dnasdw/watcher_test/settings/secrets/actions/new 配置参考 MY_GITHUB_TOKEN: ghp_* ","date":"2021-12-06","objectID":"/anr/posts/anr/:55:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#把my_github_token配置到守望者仓库中-4"},{"categories":null,"content":"配置守望者 克隆到本地 git clone --recursive https://github.com/dnasdw/watcher_test.git cd watcher_test git submodule add https://github.com/dnasdw/pages_draft.git pages_draft 创建github actions配置.github/workflows/draft-gh-pages.yml 配置参考 name:GitHub Pageson:workflow_dispatch:inputs:commit_id:description:The branch, tag or SHA of the submodule to checkout.required:falsedefault:push:branches:- masterjobs:deploy:runs-on:ubuntu-20.04concurrency:group:${{ github.workflow }}-${{ github.ref }}steps:- uses:actions/checkout@v2with:token:${{ secrets.MY_GITHUB_TOKEN }}submodules:recursivefetch-depth:0- name:Checkout submodule with github tokenif:${{ github.event.inputs.commit_id != '' }}uses:actions/checkout@v2with:repository:dnasdw/pages_draftpath:pages_draftref:${{ github.event.inputs.commit_id }}token:${{ secrets.MY_GITHUB_TOKEN }}submodules:recursivefetch-depth:0- name:Get full commit message like peaceiris/actions-gh-pages@v3working-directory:./pages_draftrun:|printf -v FULL_COMMIT_MESSAGE %s \"$(git log -1 --pretty=format:%B) dnasdw/pages_draft@$(git log -1 --pretty=format:%H)\" echo \"$FULL_COMMIT_MESSAGE\" echo \"FULL_COMMIT_MESSAGE\u003c\u003cEOF\" \u003e\u003e $GITHUB_ENV echo \"$FULL_COMMIT_MESSAGE\" \u003e\u003e $GITHUB_ENV echo \"EOF\" \u003e\u003e $GITHUB_ENV- name:Disable quotePathworking-directory:./pages_draftrun:git config core.quotePath false- name:Setup Hugouses:peaceiris/actions-hugo@v2with:hugo-version:latestextended:true- name:Buildworking-directory:./pages_draftrun:hugo --minify- name:Deployuses:peaceiris/actions-gh-pages@v3if:${{ github.ref == 'refs/heads/master' }}with:personal_token:${{ secrets.MY_GITHUB_TOKEN }}external_repository:dnasdw/draftpublish_branch:gh-pagespublish_dir:./pages_draft/publicforce_orphan:falseuser_name:Sun Daowenuser_email:sundaowen@gmail.comfull_commit_message:${{ env.FULL_COMMIT_MESSAGE }} 提交推送 git add * git commit -m \"setup pages\" git push origin master ","date":"2021-12-06","objectID":"/anr/posts/anr/:56:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#配置守望者-4"},{"categories":null,"content":"配置中转worker 教程 https://github.com/dnasdw/workflow_dispatch-worker 配置参考 GITHUB_WEBHOOK_SECRET: 2008* Payload URL: https://webhook_workflow_dispatch-worker.dnasdw.workers.dev/api/github/repos/dnasdw/watcher_test/actions/workflows/draft-gh-pages.yml/dispatches ","date":"2021-12-06","objectID":"/anr/posts/anr/:57:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#配置中转worker-4"},{"categories":null,"content":"github pages地址 配置地址 https://github.com/dnasdw/draft/settings/pages 页面地址 https://dnasdw.github.io/draft/ ","date":"2021-12-06","objectID":"/anr/posts/anr/:58:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#github-pages地址-4"},{"categories":null,"content":"安装评论系统 https://utteranc.es/ 应用地址 https://github.com/apps/utterances 配置权限 Only select repositories: dnasdw/comments_test ","date":"2021-12-06","objectID":"/anr/posts/anr/:59:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#安装评论系统-4"},{"categories":null,"content":"更新config 配置参考 baseURL = \"https://dnasdw.github.io/draft\" # [en, zh-cn, fr, pl, ...] determines default content language # [en, zh-cn, fr, pl, ...] 设置默认的语言 defaultContentLanguage = \"zh-cn\" # theme # 主题 theme = \"DoIt\" # themes directory # 主题目录 # themesDir = \"themes\" # website title # 网站标题 # TODO title = \"聚草稿\" # whether to use robots.txt # 是否使用 robots.txt enableRobotsTXT = true # whether to use git commit log # 是否使用 git 信息 enableGitInfo = true # whether to use emoji code # 是否使用 emoji 代码 enableEmoji = true [languages] [languages.zh-cn] weight = 1 # 网站语言, 仅在这里 CN 大写 languageCode = \"zh-CN\" # 语言名称 languageName = \"简体中文\" # 是否包括中日韩文字 hasCJKLanguage = true # 默认每页列表显示的文章数目 paginate = 10 # [UA-XXXXXXXX-X] 谷歌分析代号 googleAnalytics = \"\" # 版权描述，仅仅用于 SEO copyright = \"This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.\" # 菜单配置 [languages.zh-cn.menu] [[languages.zh-cn.menu.main]] identifier = \"posts\" # 你可以在名称 (允许 HTML 格式) 之前添加其他信息, 例如图标 pre = \"\" # 你可以在名称 (允许 HTML 格式) 之后添加其他信息, 例如图标 post = \"\" name = \"所有文章\" url = \"posts/\" title = \"\" weight = 1 [[languages.zh-cn.menu.main]] identifier = \"tags\" pre = \"\" post = \"\" name = \"标签\" url = \"tags/\" title = \"\" weight = 2 [[languages.zh-cn.menu.main]] identifier = \"categories\" pre = \"\" post = \"\" name = \"分类\" url = \"categories/\" title = \"\" weight = 3 [[languages.zh-cn.menu.main]] identifier = \"series\" pre = \"\" post = \"\" name = \"系列\" url = \"series/\" title = \"\" weight = 4 [[languages.zh-cn.menu.main]] identifier = \"authors\" pre = \"\" post = \"\" name = \"作者\" url = \"authors/\" title = \"\" weight = 5 # TODO [[languages.zh-cn.menu.main]] identifier = \"github\" pre = \"\u003ci class='fab fa-github fa-fw'\u003e\u003c/i\u003e\" post = \"\" name = \"\" url = \"https://github.com/dnasdw/draft\" title = \"GitHub\" weight = 9 [languages.zh-cn.params] # 网站描述 # TODO description = \"聚草稿\" # 网站关键词 # TODO keywords = [\"聚草稿\", \"\"] # 应用图标配置 [languages.zh-cn.params.app] # 当添加到 iOS 主屏幕或者 Android 启动器时的标题, 覆盖默认标题 # TODO title = \"聚草稿\" # 是否隐藏网站图标资源链接 noFavicon = false # 更现代的 SVG 网站图标, 可替代旧的 .png 和 .ico 文件 svgFavicon = \"\" # Safari 图标颜色 iconColor = \"#5bbad5\" # Windows v8-10 磁贴颜色 tileColor = \"#da532c\" # 搜索配置 [languages.zh-cn.params.search] enable = true # 搜索引擎的类型 (\"lunr\", \"algolia\", \"fuse\") type = \"fuse\" # 文章内容最长索引长度 contentLength = 4000 # 搜索框的占位提示语 placeholder = \"\" # 最大结果数目 maxResultLength = 10 # 结果内容片段长度 snippetLength = 50 # 搜索结果中高亮部分的 HTML 标签 highlightTag = \"em\" # 是否在搜索索引中使用基于 baseURL 的绝对路径 absoluteURL = false [languages.zh-cn.params.search.algolia] index = \"\" appID = \"\" searchKey = \"\" [languages.zh-cn.params.search.fuse] # https://fusejs.io/api/options.html isCaseSensitive = false minMatchCharLength = 1 findAllMatches = false location = 0 threshold = 0.1 distance = 100 ignoreLocation = true useExtendedSearch = false ignoreFieldNorm = false # 主页信息设置 [languages.zh-cn.params.home] # RSS 文章数目 rss = 10 # 主页个人信息 [languages.zh-cn.params.home.profile] enable = true # Gravatar 邮箱，用于优先在主页显示的头像 gravatarEmail = \"\" # 主页显示头像的 URL avatarURL = \"/images/dnasdw256.png\" # 主页显示的网站标题 (支持 HTML 格式) title = \"\" # 主页显示的网站副标题 # TODO subtitle = \"\" # 是否为副标题显示打字机动画 typeit = false # 是否显示社交账号 social = true # 免责声明 (支持 HTML 格式) disclaimer = \"\" # 主页文章列表 [languages.zh-cn.params.home.posts] enable = true # 主页每页显示文章数量 paginate = 10 # 主页的社交信息设置 [languages.zh-cn.params.social] GitHub = \"dnasdw\" Linkedin = \"\" Twitter = \"sundaowen\" Instagram = \"\" Facebook = \"\" Telegram = \"\" Medium = \"\" Gitlab = \"dnasdw\" Youtubelegacy = \"\" Youtubecustom = \"\" Youtubechannel = \"\" Tumblr = \"\" Quora = \"\" Keybase = \"\" Pinterest = \"\" Reddit = \"\" Codepen = \"\" FreeCodeCamp = \"\" Bitbucket = \"dnasdw\" Stackoverflow = \"\" Weibo = \"dnasdw\" Odnoklassniki = \"\" VK = \"\" Flickr = \"\" Xing = \"\" Snapchat = \"\" Soundcloud = \"\" Spotify = \"\" Bandcamp = \"\" Paypal = \"\" Fivehundredpx = \"\" Mix = \"\" Goodreads = \"\" Lastfm = \"\" Foursquare = \"\" Hackernews = \"\" Kickstarter = \"\" Patreon = \"\" Steam = \"dnasdw\" Twitch = \"\" Strava = \"\" Skype = \"\" Whatsapp = \"\" Zhihu = \"dnasdw\" Douban = \"\" Angellist = \"\" Slidershare = \"\" Jsfiddle =","date":"2021-12-06","objectID":"/anr/posts/anr/:60:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#更新config-4"},{"categories":null,"content":"菜单url 如果config中baseURL包含子目录, 则menu配置中的url不能以斜杠开始, 比如\"所有文章\"的url不可以为/posts/, 但可以为posts/或./posts/. ","date":"2021-12-06","objectID":"/anr/posts/anr/:60:1","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#菜单url-4"},{"categories":null,"content":"头像文件 创建assets/images/dnasdw256.png, 并将config中的头像路径改为/images/dnasdw256.png. ","date":"2021-12-06","objectID":"/anr/posts/anr/:60:2","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#头像文件-4"},{"categories":null,"content":"网站图标 准备一个512x512的图标, 比如去https://www.flaticon.com/搜索一个合适的. 去https://realfavicongenerator.net/上传图标, 下载得到图标配置包, 解压到static目录. 如果config中baseURL包含子目录, 则需要将themes/DoIt/layouts/partials/head/link.html复制到layouts/partials/head/link.html, 并将favicon部分的链接前加上/子目录名, 比如href=\"/favicon.ico\"改为href=\"/draft/favicon.ico\". 配置参考 {{- if not .Site.Params.app.noFavicon -}} {{- with .Site.Params.app.svgFavicon -}} \u003clink rel=\"icon\" href=\"{{ . }}\"\u003e {{- else -}} \u003clink rel=\"shortcut icon\" type=\"image/x-icon\" href=\"/draft/favicon.ico\" /\u003e \u003clink rel=\"icon\" type=\"image/png\" sizes=\"32x32\" href=\"/draft/favicon-32x32.png\"\u003e \u003clink rel=\"icon\" type=\"image/png\" sizes=\"16x16\" href=\"/draft/favicon-16x16.png\"\u003e {{- end -}} \u003clink rel=\"apple-touch-icon\" sizes=\"180x180\" href=\"/draft/apple-touch-icon.png\"\u003e {{- with .Site.Params.app.iconColor -}} \u003clink rel=\"mask-icon\" href=\"/draft/safari-pinned-tab.svg\" color=\"{{ . }}\"\u003e {{- end -}} {{- if eq .Site.Params.enablePWA true -}} \u003clink rel=\"manifest\" href=\"/draft/site.webmanifest\"\u003e {{- end -}} {{- end -}} ","date":"2021-12-06","objectID":"/anr/posts/anr/:60:3","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#网站图标-4"},{"categories":null,"content":"补充缺失的中文译文 创建i18n/zh-CN.toml # Translations for Simplified Chinese # 简体中文的翻译 # https://gohugo.io/content-management/multilingual/#translation-of-strings [authors] other = \"作者\" ","date":"2021-12-06","objectID":"/anr/posts/anr/:60:4","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#补充缺失的中文译文-4"},{"categories":null,"content":"作者配置 创建data/authors/dnasdw.toml name = \"dnasdw\" link = \"https://github.com/dnasdw\" 之后就可以在文章的Front Matter中使用authors: [dnasdw]. ","date":"2021-12-06","objectID":"/anr/posts/anr/:60:5","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#作者配置-4"},{"categories":null,"content":"配置PWA 创建content/offline/index.md --- title: \"离线\" --- \u003e 你没有连接至互联网, 只有缓存的页面可用. 修改static/site.webmanifest, 添加start_url, 并填写name/short_name/start_url. { \"name\": \"聚草稿\", \"short_name\": \"聚草稿\", \"start_url\": \"/draft/\", \"icons\": [ { \"src\": \"/draft/android-chrome-192x192.png\", \"sizes\": \"192x192\", \"type\": \"image/png\" }, { \"src\": \"/draft/android-chrome-512x512.png\", \"sizes\": \"512x512\", \"type\": \"image/png\" } ], \"theme_color\": \"#ffffff\", \"background_color\": \"#ffffff\", \"display\": \"standalone\" } 如果config中baseURL包含子目录, 则需要将themes/DoIt/assets/js/sw.js复制到assets/js/sw.js, 并将相关链接前加上/子目录名, 比如/css/style.min.css改为/darft/css/style.min.css; 同样修改static/site.webmanifest中的相关路径, 其中start_url从/改为/子目录名/, 比如\"start_url\": \"/\"改为\"start_url\": \"/draft/\"; 还需要将themes/DoIt/layouts/partials/footer.html复制到layouts/partials/footer.html, 并修改注册参数, 比如.register('/sw.min.js', { scope: '/' })改为.register('/draft/sw.min.js', { scope: '/draft/' }). 配置参考 const BASE_CACHE_FILES = [ '/draft/css/style.min.css', '/draft/js/theme.min.js', '/draft/site.webmanifest' ] const OFFLINE_CACHE_FILES = [ '/draft/css/style.min.css', '/draft/js/theme.min.js', '/draft/site.webmanifest', '/draft/offline' ] const NOT_FOUND_CACHE_FILES = [ '/draft/css/style.min.css', '/draft/js/theme.min.js', '/draft/site.webmanifest', '/draft/404.html' ] const OFFLINE_PAGE = '/draft/offline' const NOT_FOUND_PAGE = '/draft/404.html' ","date":"2021-12-06","objectID":"/anr/posts/anr/:60:6","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#配置pwa-4"},{"categories":null,"content":"安装静态网站生成器hugo-extended 官方教程 https://gohugo.io/getting-started/installing/ ","date":"2021-12-06","objectID":"/anr/posts/anr/:61:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#安装静态网站生成器hugo-extended-5"},{"categories":null,"content":"创建或使用守望者仓库watcher_test https://github.com/new https://github.com/dnasdw/watcher_test ","date":"2021-12-06","objectID":"/anr/posts/anr/:62:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#创建或使用守望者仓库watcher_test-5"},{"categories":null,"content":"创建部署仓库draft https://github.com/new https://github.com/dnasdw/draft ","date":"2021-12-06","objectID":"/anr/posts/anr/:63:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#创建部署仓库draft-5"},{"categories":null,"content":"创建评论仓库comments_test https://github.com/new https://github.com/dnasdw/comments_test ","date":"2021-12-06","objectID":"/anr/posts/anr/:64:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#创建评论仓库comments_test-5"},{"categories":null,"content":"创建源文件仓库pages_draft https://github.com/new https://github.com/dnasdw/pages_draft 克隆到本地并新建站点 git clone --recursive https://github.com/dnasdw/pages_draft.git hugo new site pages_draft --force cd pages_draft 创建.gitignore 内容来自https://github.com/github/gitignore/blob/main/community/Golang/Hugo.gitignore # Generated files by hugo /public/ /resources/_gen/ /assets/jsconfig.json hugo_stats.json # Executable may be added to repository hugo.exe hugo.darwin hugo.linux # Temporary lock file while building /.hugo_build.lock 添加主题 git submodule add https://github.com/dnasdw/DoIt.git themes/DoIt 修改config.toml baseURL = \"https://dnasdw.github.io/draft\" defaultContentLanguage = \"zh-cn\" theme = \"DoIt\" title = \"聚草稿\" [languages] [languages.zh-cn] languageCode = \"zh-CN\" hasCJKLanguage = true [params] version = \"0.2.X\" 提交推送 git add * git commit -m setup git push origin master ","date":"2021-12-06","objectID":"/anr/posts/anr/:65:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#创建源文件仓库pages_draft-5"},{"categories":null,"content":"创建MY_GITHUB_TOKEN 查看是否已有token https://github.com/settings/tokens 如果没有则新建token https://github.com/settings/tokens/new 配置参考 Note: actions-gh-pages Expiration: No expiration Select scopes: [v] repo ","date":"2021-12-06","objectID":"/anr/posts/anr/:66:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#创建my_github_token-5"},{"categories":null,"content":"把MY_GITHUB_TOKEN配置到守望者仓库中 查看是否已配置token https://github.com/dnasdw/watcher_test/settings/secrets/actions 如果没有则配置token https://github.com/dnasdw/watcher_test/settings/secrets/actions/new 配置参考 MY_GITHUB_TOKEN: ghp_* ","date":"2021-12-06","objectID":"/anr/posts/anr/:67:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#把my_github_token配置到守望者仓库中-5"},{"categories":null,"content":"配置守望者 克隆到本地 git clone --recursive https://github.com/dnasdw/watcher_test.git cd watcher_test git submodule add https://github.com/dnasdw/pages_draft.git pages_draft 创建github actions配置.github/workflows/draft-gh-pages.yml 配置参考 name:GitHub Pageson:workflow_dispatch:inputs:commit_id:description:The branch, tag or SHA of the submodule to checkout.required:falsedefault:push:branches:- masterjobs:deploy:runs-on:ubuntu-20.04concurrency:group:${{ github.workflow }}-${{ github.ref }}steps:- uses:actions/checkout@v2with:token:${{ secrets.MY_GITHUB_TOKEN }}submodules:recursivefetch-depth:0- name:Checkout submodule with github tokenif:${{ github.event.inputs.commit_id != '' }}uses:actions/checkout@v2with:repository:dnasdw/pages_draftpath:pages_draftref:${{ github.event.inputs.commit_id }}token:${{ secrets.MY_GITHUB_TOKEN }}submodules:recursivefetch-depth:0- name:Get full commit message like peaceiris/actions-gh-pages@v3working-directory:./pages_draftrun:|printf -v FULL_COMMIT_MESSAGE %s \"$(git log -1 --pretty=format:%B) dnasdw/pages_draft@$(git log -1 --pretty=format:%H)\" echo \"$FULL_COMMIT_MESSAGE\" echo \"FULL_COMMIT_MESSAGE\u003c\u003cEOF\" \u003e\u003e $GITHUB_ENV echo \"$FULL_COMMIT_MESSAGE\" \u003e\u003e $GITHUB_ENV echo \"EOF\" \u003e\u003e $GITHUB_ENV- name:Disable quotePathworking-directory:./pages_draftrun:git config core.quotePath false- name:Setup Hugouses:peaceiris/actions-hugo@v2with:hugo-version:latestextended:true- name:Buildworking-directory:./pages_draftrun:hugo --minify- name:Deployuses:peaceiris/actions-gh-pages@v3if:${{ github.ref == 'refs/heads/master' }}with:personal_token:${{ secrets.MY_GITHUB_TOKEN }}external_repository:dnasdw/draftpublish_branch:gh-pagespublish_dir:./pages_draft/publicforce_orphan:falseuser_name:Sun Daowenuser_email:sundaowen@gmail.comfull_commit_message:${{ env.FULL_COMMIT_MESSAGE }} 提交推送 git add * git commit -m \"setup pages\" git push origin master ","date":"2021-12-06","objectID":"/anr/posts/anr/:68:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#配置守望者-5"},{"categories":null,"content":"配置中转worker 教程 https://github.com/dnasdw/workflow_dispatch-worker 配置参考 GITHUB_WEBHOOK_SECRET: 2008* Payload URL: https://webhook_workflow_dispatch-worker.dnasdw.workers.dev/api/github/repos/dnasdw/watcher_test/actions/workflows/draft-gh-pages.yml/dispatches ","date":"2021-12-06","objectID":"/anr/posts/anr/:69:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#配置中转worker-5"},{"categories":null,"content":"github pages地址 配置地址 https://github.com/dnasdw/draft/settings/pages 页面地址 https://dnasdw.github.io/draft/ ","date":"2021-12-06","objectID":"/anr/posts/anr/:70:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#github-pages地址-5"},{"categories":null,"content":"安装评论系统 https://utteranc.es/ 应用地址 https://github.com/apps/utterances 配置权限 Only select repositories: dnasdw/comments_test ","date":"2021-12-06","objectID":"/anr/posts/anr/:71:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#安装评论系统-5"},{"categories":null,"content":"更新config 配置参考 baseURL = \"https://dnasdw.github.io/draft\" # [en, zh-cn, fr, pl, ...] determines default content language # [en, zh-cn, fr, pl, ...] 设置默认的语言 defaultContentLanguage = \"zh-cn\" # theme # 主题 theme = \"DoIt\" # themes directory # 主题目录 # themesDir = \"themes\" # website title # 网站标题 # TODO title = \"聚草稿\" # whether to use robots.txt # 是否使用 robots.txt enableRobotsTXT = true # whether to use git commit log # 是否使用 git 信息 enableGitInfo = true # whether to use emoji code # 是否使用 emoji 代码 enableEmoji = true [languages] [languages.zh-cn] weight = 1 # 网站语言, 仅在这里 CN 大写 languageCode = \"zh-CN\" # 语言名称 languageName = \"简体中文\" # 是否包括中日韩文字 hasCJKLanguage = true # 默认每页列表显示的文章数目 paginate = 10 # [UA-XXXXXXXX-X] 谷歌分析代号 googleAnalytics = \"\" # 版权描述，仅仅用于 SEO copyright = \"This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.\" # 菜单配置 [languages.zh-cn.menu] [[languages.zh-cn.menu.main]] identifier = \"posts\" # 你可以在名称 (允许 HTML 格式) 之前添加其他信息, 例如图标 pre = \"\" # 你可以在名称 (允许 HTML 格式) 之后添加其他信息, 例如图标 post = \"\" name = \"所有文章\" url = \"posts/\" title = \"\" weight = 1 [[languages.zh-cn.menu.main]] identifier = \"tags\" pre = \"\" post = \"\" name = \"标签\" url = \"tags/\" title = \"\" weight = 2 [[languages.zh-cn.menu.main]] identifier = \"categories\" pre = \"\" post = \"\" name = \"分类\" url = \"categories/\" title = \"\" weight = 3 [[languages.zh-cn.menu.main]] identifier = \"series\" pre = \"\" post = \"\" name = \"系列\" url = \"series/\" title = \"\" weight = 4 [[languages.zh-cn.menu.main]] identifier = \"authors\" pre = \"\" post = \"\" name = \"作者\" url = \"authors/\" title = \"\" weight = 5 # TODO [[languages.zh-cn.menu.main]] identifier = \"github\" pre = \"\u003ci class='fab fa-github fa-fw'\u003e\u003c/i\u003e\" post = \"\" name = \"\" url = \"https://github.com/dnasdw/draft\" title = \"GitHub\" weight = 9 [languages.zh-cn.params] # 网站描述 # TODO description = \"聚草稿\" # 网站关键词 # TODO keywords = [\"聚草稿\", \"\"] # 应用图标配置 [languages.zh-cn.params.app] # 当添加到 iOS 主屏幕或者 Android 启动器时的标题, 覆盖默认标题 # TODO title = \"聚草稿\" # 是否隐藏网站图标资源链接 noFavicon = false # 更现代的 SVG 网站图标, 可替代旧的 .png 和 .ico 文件 svgFavicon = \"\" # Safari 图标颜色 iconColor = \"#5bbad5\" # Windows v8-10 磁贴颜色 tileColor = \"#da532c\" # 搜索配置 [languages.zh-cn.params.search] enable = true # 搜索引擎的类型 (\"lunr\", \"algolia\", \"fuse\") type = \"fuse\" # 文章内容最长索引长度 contentLength = 4000 # 搜索框的占位提示语 placeholder = \"\" # 最大结果数目 maxResultLength = 10 # 结果内容片段长度 snippetLength = 50 # 搜索结果中高亮部分的 HTML 标签 highlightTag = \"em\" # 是否在搜索索引中使用基于 baseURL 的绝对路径 absoluteURL = false [languages.zh-cn.params.search.algolia] index = \"\" appID = \"\" searchKey = \"\" [languages.zh-cn.params.search.fuse] # https://fusejs.io/api/options.html isCaseSensitive = false minMatchCharLength = 1 findAllMatches = false location = 0 threshold = 0.1 distance = 100 ignoreLocation = true useExtendedSearch = false ignoreFieldNorm = false # 主页信息设置 [languages.zh-cn.params.home] # RSS 文章数目 rss = 10 # 主页个人信息 [languages.zh-cn.params.home.profile] enable = true # Gravatar 邮箱，用于优先在主页显示的头像 gravatarEmail = \"\" # 主页显示头像的 URL avatarURL = \"/images/dnasdw256.png\" # 主页显示的网站标题 (支持 HTML 格式) title = \"\" # 主页显示的网站副标题 # TODO subtitle = \"\" # 是否为副标题显示打字机动画 typeit = false # 是否显示社交账号 social = true # 免责声明 (支持 HTML 格式) disclaimer = \"\" # 主页文章列表 [languages.zh-cn.params.home.posts] enable = true # 主页每页显示文章数量 paginate = 10 # 主页的社交信息设置 [languages.zh-cn.params.social] GitHub = \"dnasdw\" Linkedin = \"\" Twitter = \"sundaowen\" Instagram = \"\" Facebook = \"\" Telegram = \"\" Medium = \"\" Gitlab = \"dnasdw\" Youtubelegacy = \"\" Youtubecustom = \"\" Youtubechannel = \"\" Tumblr = \"\" Quora = \"\" Keybase = \"\" Pinterest = \"\" Reddit = \"\" Codepen = \"\" FreeCodeCamp = \"\" Bitbucket = \"dnasdw\" Stackoverflow = \"\" Weibo = \"dnasdw\" Odnoklassniki = \"\" VK = \"\" Flickr = \"\" Xing = \"\" Snapchat = \"\" Soundcloud = \"\" Spotify = \"\" Bandcamp = \"\" Paypal = \"\" Fivehundredpx = \"\" Mix = \"\" Goodreads = \"\" Lastfm = \"\" Foursquare = \"\" Hackernews = \"\" Kickstarter = \"\" Patreon = \"\" Steam = \"dnasdw\" Twitch = \"\" Strava = \"\" Skype = \"\" Whatsapp = \"\" Zhihu = \"dnasdw\" Douban = \"\" Angellist = \"\" Slidershare = \"\" Jsfiddle =","date":"2021-12-06","objectID":"/anr/posts/anr/:72:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#更新config-5"},{"categories":null,"content":"菜单url 如果config中baseURL包含子目录, 则menu配置中的url不能以斜杠开始, 比如\"所有文章\"的url不可以为/posts/, 但可以为posts/或./posts/. ","date":"2021-12-06","objectID":"/anr/posts/anr/:72:1","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#菜单url-5"},{"categories":null,"content":"头像文件 创建assets/images/dnasdw256.png, 并将config中的头像路径改为/images/dnasdw256.png. ","date":"2021-12-06","objectID":"/anr/posts/anr/:72:2","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#头像文件-5"},{"categories":null,"content":"网站图标 准备一个512x512的图标, 比如去https://www.flaticon.com/搜索一个合适的. 去https://realfavicongenerator.net/上传图标, 下载得到图标配置包, 解压到static目录. 如果config中baseURL包含子目录, 则需要将themes/DoIt/layouts/partials/head/link.html复制到layouts/partials/head/link.html, 并将favicon部分的链接前加上/子目录名, 比如href=\"/favicon.ico\"改为href=\"/draft/favicon.ico\". 配置参考 {{- if not .Site.Params.app.noFavicon -}} {{- with .Site.Params.app.svgFavicon -}} \u003clink rel=\"icon\" href=\"{{ . }}\"\u003e {{- else -}} \u003clink rel=\"shortcut icon\" type=\"image/x-icon\" href=\"/draft/favicon.ico\" /\u003e \u003clink rel=\"icon\" type=\"image/png\" sizes=\"32x32\" href=\"/draft/favicon-32x32.png\"\u003e \u003clink rel=\"icon\" type=\"image/png\" sizes=\"16x16\" href=\"/draft/favicon-16x16.png\"\u003e {{- end -}} \u003clink rel=\"apple-touch-icon\" sizes=\"180x180\" href=\"/draft/apple-touch-icon.png\"\u003e {{- with .Site.Params.app.iconColor -}} \u003clink rel=\"mask-icon\" href=\"/draft/safari-pinned-tab.svg\" color=\"{{ . }}\"\u003e {{- end -}} {{- if eq .Site.Params.enablePWA true -}} \u003clink rel=\"manifest\" href=\"/draft/site.webmanifest\"\u003e {{- end -}} {{- end -}} ","date":"2021-12-06","objectID":"/anr/posts/anr/:72:3","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#网站图标-5"},{"categories":null,"content":"补充缺失的中文译文 创建i18n/zh-CN.toml # Translations for Simplified Chinese # 简体中文的翻译 # https://gohugo.io/content-management/multilingual/#translation-of-strings [authors] other = \"作者\" ","date":"2021-12-06","objectID":"/anr/posts/anr/:72:4","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#补充缺失的中文译文-5"},{"categories":null,"content":"作者配置 创建data/authors/dnasdw.toml name = \"dnasdw\" link = \"https://github.com/dnasdw\" 之后就可以在文章的Front Matter中使用authors: [dnasdw]. ","date":"2021-12-06","objectID":"/anr/posts/anr/:72:5","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#作者配置-5"},{"categories":null,"content":"配置PWA 创建content/offline/index.md --- title: \"离线\" --- \u003e 你没有连接至互联网, 只有缓存的页面可用. 修改static/site.webmanifest, 添加start_url, 并填写name/short_name/start_url. { \"name\": \"聚草稿\", \"short_name\": \"聚草稿\", \"start_url\": \"/draft/\", \"icons\": [ { \"src\": \"/draft/android-chrome-192x192.png\", \"sizes\": \"192x192\", \"type\": \"image/png\" }, { \"src\": \"/draft/android-chrome-512x512.png\", \"sizes\": \"512x512\", \"type\": \"image/png\" } ], \"theme_color\": \"#ffffff\", \"background_color\": \"#ffffff\", \"display\": \"standalone\" } 如果config中baseURL包含子目录, 则需要将themes/DoIt/assets/js/sw.js复制到assets/js/sw.js, 并将相关链接前加上/子目录名, 比如/css/style.min.css改为/darft/css/style.min.css; 同样修改static/site.webmanifest中的相关路径, 其中start_url从/改为/子目录名/, 比如\"start_url\": \"/\"改为\"start_url\": \"/draft/\"; 还需要将themes/DoIt/layouts/partials/footer.html复制到layouts/partials/footer.html, 并修改注册参数, 比如.register('/sw.min.js', { scope: '/' })改为.register('/draft/sw.min.js', { scope: '/draft/' }). 配置参考 const BASE_CACHE_FILES = [ '/draft/css/style.min.css', '/draft/js/theme.min.js', '/draft/site.webmanifest' ] const OFFLINE_CACHE_FILES = [ '/draft/css/style.min.css', '/draft/js/theme.min.js', '/draft/site.webmanifest', '/draft/offline' ] const NOT_FOUND_CACHE_FILES = [ '/draft/css/style.min.css', '/draft/js/theme.min.js', '/draft/site.webmanifest', '/draft/404.html' ] const OFFLINE_PAGE = '/draft/offline' const NOT_FOUND_PAGE = '/draft/404.html' ","date":"2021-12-06","objectID":"/anr/posts/anr/:72:6","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#配置pwa-5"},{"categories":null,"content":"安装静态网站生成器hugo-extended 官方教程 https://gohugo.io/getting-started/installing/ ","date":"2021-12-06","objectID":"/anr/posts/anr/:73:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#安装静态网站生成器hugo-extended-6"},{"categories":null,"content":"创建或使用守望者仓库watcher_test https://github.com/new https://github.com/dnasdw/watcher_test ","date":"2021-12-06","objectID":"/anr/posts/anr/:74:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#创建或使用守望者仓库watcher_test-6"},{"categories":null,"content":"创建部署仓库draft https://github.com/new https://github.com/dnasdw/draft ","date":"2021-12-06","objectID":"/anr/posts/anr/:75:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#创建部署仓库draft-6"},{"categories":null,"content":"创建评论仓库comments_test https://github.com/new https://github.com/dnasdw/comments_test ","date":"2021-12-06","objectID":"/anr/posts/anr/:76:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#创建评论仓库comments_test-6"},{"categories":null,"content":"创建源文件仓库pages_draft https://github.com/new https://github.com/dnasdw/pages_draft 克隆到本地并新建站点 git clone --recursive https://github.com/dnasdw/pages_draft.git hugo new site pages_draft --force cd pages_draft 创建.gitignore 内容来自https://github.com/github/gitignore/blob/main/community/Golang/Hugo.gitignore # Generated files by hugo /public/ /resources/_gen/ /assets/jsconfig.json hugo_stats.json # Executable may be added to repository hugo.exe hugo.darwin hugo.linux # Temporary lock file while building /.hugo_build.lock 添加主题 git submodule add https://github.com/dnasdw/DoIt.git themes/DoIt 修改config.toml baseURL = \"https://dnasdw.github.io/draft\" defaultContentLanguage = \"zh-cn\" theme = \"DoIt\" title = \"聚草稿\" [languages] [languages.zh-cn] languageCode = \"zh-CN\" hasCJKLanguage = true [params] version = \"0.2.X\" 提交推送 git add * git commit -m setup git push origin master ","date":"2021-12-06","objectID":"/anr/posts/anr/:77:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#创建源文件仓库pages_draft-6"},{"categories":null,"content":"创建MY_GITHUB_TOKEN 查看是否已有token https://github.com/settings/tokens 如果没有则新建token https://github.com/settings/tokens/new 配置参考 Note: actions-gh-pages Expiration: No expiration Select scopes: [v] repo ","date":"2021-12-06","objectID":"/anr/posts/anr/:78:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#创建my_github_token-6"},{"categories":null,"content":"把MY_GITHUB_TOKEN配置到守望者仓库中 查看是否已配置token https://github.com/dnasdw/watcher_test/settings/secrets/actions 如果没有则配置token https://github.com/dnasdw/watcher_test/settings/secrets/actions/new 配置参考 MY_GITHUB_TOKEN: ghp_* ","date":"2021-12-06","objectID":"/anr/posts/anr/:79:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#把my_github_token配置到守望者仓库中-6"},{"categories":null,"content":"配置守望者 克隆到本地 git clone --recursive https://github.com/dnasdw/watcher_test.git cd watcher_test git submodule add https://github.com/dnasdw/pages_draft.git pages_draft 创建github actions配置.github/workflows/draft-gh-pages.yml 配置参考 name:GitHub Pageson:workflow_dispatch:inputs:commit_id:description:The branch, tag or SHA of the submodule to checkout.required:falsedefault:push:branches:- masterjobs:deploy:runs-on:ubuntu-20.04concurrency:group:${{ github.workflow }}-${{ github.ref }}steps:- uses:actions/checkout@v2with:token:${{ secrets.MY_GITHUB_TOKEN }}submodules:recursivefetch-depth:0- name:Checkout submodule with github tokenif:${{ github.event.inputs.commit_id != '' }}uses:actions/checkout@v2with:repository:dnasdw/pages_draftpath:pages_draftref:${{ github.event.inputs.commit_id }}token:${{ secrets.MY_GITHUB_TOKEN }}submodules:recursivefetch-depth:0- name:Get full commit message like peaceiris/actions-gh-pages@v3working-directory:./pages_draftrun:|printf -v FULL_COMMIT_MESSAGE %s \"$(git log -1 --pretty=format:%B) dnasdw/pages_draft@$(git log -1 --pretty=format:%H)\" echo \"$FULL_COMMIT_MESSAGE\" echo \"FULL_COMMIT_MESSAGE\u003c\u003cEOF\" \u003e\u003e $GITHUB_ENV echo \"$FULL_COMMIT_MESSAGE\" \u003e\u003e $GITHUB_ENV echo \"EOF\" \u003e\u003e $GITHUB_ENV- name:Disable quotePathworking-directory:./pages_draftrun:git config core.quotePath false- name:Setup Hugouses:peaceiris/actions-hugo@v2with:hugo-version:latestextended:true- name:Buildworking-directory:./pages_draftrun:hugo --minify- name:Deployuses:peaceiris/actions-gh-pages@v3if:${{ github.ref == 'refs/heads/master' }}with:personal_token:${{ secrets.MY_GITHUB_TOKEN }}external_repository:dnasdw/draftpublish_branch:gh-pagespublish_dir:./pages_draft/publicforce_orphan:falseuser_name:Sun Daowenuser_email:sundaowen@gmail.comfull_commit_message:${{ env.FULL_COMMIT_MESSAGE }} 提交推送 git add * git commit -m \"setup pages\" git push origin master ","date":"2021-12-06","objectID":"/anr/posts/anr/:80:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#配置守望者-6"},{"categories":null,"content":"配置中转worker 教程 https://github.com/dnasdw/workflow_dispatch-worker 配置参考 GITHUB_WEBHOOK_SECRET: 2008* Payload URL: https://webhook_workflow_dispatch-worker.dnasdw.workers.dev/api/github/repos/dnasdw/watcher_test/actions/workflows/draft-gh-pages.yml/dispatches ","date":"2021-12-06","objectID":"/anr/posts/anr/:81:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#配置中转worker-6"},{"categories":null,"content":"github pages地址 配置地址 https://github.com/dnasdw/draft/settings/pages 页面地址 https://dnasdw.github.io/draft/ ","date":"2021-12-06","objectID":"/anr/posts/anr/:82:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#github-pages地址-6"},{"categories":null,"content":"安装评论系统 https://utteranc.es/ 应用地址 https://github.com/apps/utterances 配置权限 Only select repositories: dnasdw/comments_test ","date":"2021-12-06","objectID":"/anr/posts/anr/:83:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#安装评论系统-6"},{"categories":null,"content":"更新config 配置参考 baseURL = \"https://dnasdw.github.io/draft\" # [en, zh-cn, fr, pl, ...] determines default content language # [en, zh-cn, fr, pl, ...] 设置默认的语言 defaultContentLanguage = \"zh-cn\" # theme # 主题 theme = \"DoIt\" # themes directory # 主题目录 # themesDir = \"themes\" # website title # 网站标题 # TODO title = \"聚草稿\" # whether to use robots.txt # 是否使用 robots.txt enableRobotsTXT = true # whether to use git commit log # 是否使用 git 信息 enableGitInfo = true # whether to use emoji code # 是否使用 emoji 代码 enableEmoji = true [languages] [languages.zh-cn] weight = 1 # 网站语言, 仅在这里 CN 大写 languageCode = \"zh-CN\" # 语言名称 languageName = \"简体中文\" # 是否包括中日韩文字 hasCJKLanguage = true # 默认每页列表显示的文章数目 paginate = 10 # [UA-XXXXXXXX-X] 谷歌分析代号 googleAnalytics = \"\" # 版权描述，仅仅用于 SEO copyright = \"This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.\" # 菜单配置 [languages.zh-cn.menu] [[languages.zh-cn.menu.main]] identifier = \"posts\" # 你可以在名称 (允许 HTML 格式) 之前添加其他信息, 例如图标 pre = \"\" # 你可以在名称 (允许 HTML 格式) 之后添加其他信息, 例如图标 post = \"\" name = \"所有文章\" url = \"posts/\" title = \"\" weight = 1 [[languages.zh-cn.menu.main]] identifier = \"tags\" pre = \"\" post = \"\" name = \"标签\" url = \"tags/\" title = \"\" weight = 2 [[languages.zh-cn.menu.main]] identifier = \"categories\" pre = \"\" post = \"\" name = \"分类\" url = \"categories/\" title = \"\" weight = 3 [[languages.zh-cn.menu.main]] identifier = \"series\" pre = \"\" post = \"\" name = \"系列\" url = \"series/\" title = \"\" weight = 4 [[languages.zh-cn.menu.main]] identifier = \"authors\" pre = \"\" post = \"\" name = \"作者\" url = \"authors/\" title = \"\" weight = 5 # TODO [[languages.zh-cn.menu.main]] identifier = \"github\" pre = \"\u003ci class='fab fa-github fa-fw'\u003e\u003c/i\u003e\" post = \"\" name = \"\" url = \"https://github.com/dnasdw/draft\" title = \"GitHub\" weight = 9 [languages.zh-cn.params] # 网站描述 # TODO description = \"聚草稿\" # 网站关键词 # TODO keywords = [\"聚草稿\", \"\"] # 应用图标配置 [languages.zh-cn.params.app] # 当添加到 iOS 主屏幕或者 Android 启动器时的标题, 覆盖默认标题 # TODO title = \"聚草稿\" # 是否隐藏网站图标资源链接 noFavicon = false # 更现代的 SVG 网站图标, 可替代旧的 .png 和 .ico 文件 svgFavicon = \"\" # Safari 图标颜色 iconColor = \"#5bbad5\" # Windows v8-10 磁贴颜色 tileColor = \"#da532c\" # 搜索配置 [languages.zh-cn.params.search] enable = true # 搜索引擎的类型 (\"lunr\", \"algolia\", \"fuse\") type = \"fuse\" # 文章内容最长索引长度 contentLength = 4000 # 搜索框的占位提示语 placeholder = \"\" # 最大结果数目 maxResultLength = 10 # 结果内容片段长度 snippetLength = 50 # 搜索结果中高亮部分的 HTML 标签 highlightTag = \"em\" # 是否在搜索索引中使用基于 baseURL 的绝对路径 absoluteURL = false [languages.zh-cn.params.search.algolia] index = \"\" appID = \"\" searchKey = \"\" [languages.zh-cn.params.search.fuse] # https://fusejs.io/api/options.html isCaseSensitive = false minMatchCharLength = 1 findAllMatches = false location = 0 threshold = 0.1 distance = 100 ignoreLocation = true useExtendedSearch = false ignoreFieldNorm = false # 主页信息设置 [languages.zh-cn.params.home] # RSS 文章数目 rss = 10 # 主页个人信息 [languages.zh-cn.params.home.profile] enable = true # Gravatar 邮箱，用于优先在主页显示的头像 gravatarEmail = \"\" # 主页显示头像的 URL avatarURL = \"/images/dnasdw256.png\" # 主页显示的网站标题 (支持 HTML 格式) title = \"\" # 主页显示的网站副标题 # TODO subtitle = \"\" # 是否为副标题显示打字机动画 typeit = false # 是否显示社交账号 social = true # 免责声明 (支持 HTML 格式) disclaimer = \"\" # 主页文章列表 [languages.zh-cn.params.home.posts] enable = true # 主页每页显示文章数量 paginate = 10 # 主页的社交信息设置 [languages.zh-cn.params.social] GitHub = \"dnasdw\" Linkedin = \"\" Twitter = \"sundaowen\" Instagram = \"\" Facebook = \"\" Telegram = \"\" Medium = \"\" Gitlab = \"dnasdw\" Youtubelegacy = \"\" Youtubecustom = \"\" Youtubechannel = \"\" Tumblr = \"\" Quora = \"\" Keybase = \"\" Pinterest = \"\" Reddit = \"\" Codepen = \"\" FreeCodeCamp = \"\" Bitbucket = \"dnasdw\" Stackoverflow = \"\" Weibo = \"dnasdw\" Odnoklassniki = \"\" VK = \"\" Flickr = \"\" Xing = \"\" Snapchat = \"\" Soundcloud = \"\" Spotify = \"\" Bandcamp = \"\" Paypal = \"\" Fivehundredpx = \"\" Mix = \"\" Goodreads = \"\" Lastfm = \"\" Foursquare = \"\" Hackernews = \"\" Kickstarter = \"\" Patreon = \"\" Steam = \"dnasdw\" Twitch = \"\" Strava = \"\" Skype = \"\" Whatsapp = \"\" Zhihu = \"dnasdw\" Douban = \"\" Angellist = \"\" Slidershare = \"\" Jsfiddle =","date":"2021-12-06","objectID":"/anr/posts/anr/:84:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#更新config-6"},{"categories":null,"content":"菜单url 如果config中baseURL包含子目录, 则menu配置中的url不能以斜杠开始, 比如\"所有文章\"的url不可以为/posts/, 但可以为posts/或./posts/. ","date":"2021-12-06","objectID":"/anr/posts/anr/:84:1","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#菜单url-6"},{"categories":null,"content":"头像文件 创建assets/images/dnasdw256.png, 并将config中的头像路径改为/images/dnasdw256.png. ","date":"2021-12-06","objectID":"/anr/posts/anr/:84:2","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#头像文件-6"},{"categories":null,"content":"网站图标 准备一个512x512的图标, 比如去https://www.flaticon.com/搜索一个合适的. 去https://realfavicongenerator.net/上传图标, 下载得到图标配置包, 解压到static目录. 如果config中baseURL包含子目录, 则需要将themes/DoIt/layouts/partials/head/link.html复制到layouts/partials/head/link.html, 并将favicon部分的链接前加上/子目录名, 比如href=\"/favicon.ico\"改为href=\"/draft/favicon.ico\". 配置参考 {{- if not .Site.Params.app.noFavicon -}} {{- with .Site.Params.app.svgFavicon -}} \u003clink rel=\"icon\" href=\"{{ . }}\"\u003e {{- else -}} \u003clink rel=\"shortcut icon\" type=\"image/x-icon\" href=\"/draft/favicon.ico\" /\u003e \u003clink rel=\"icon\" type=\"image/png\" sizes=\"32x32\" href=\"/draft/favicon-32x32.png\"\u003e \u003clink rel=\"icon\" type=\"image/png\" sizes=\"16x16\" href=\"/draft/favicon-16x16.png\"\u003e {{- end -}} \u003clink rel=\"apple-touch-icon\" sizes=\"180x180\" href=\"/draft/apple-touch-icon.png\"\u003e {{- with .Site.Params.app.iconColor -}} \u003clink rel=\"mask-icon\" href=\"/draft/safari-pinned-tab.svg\" color=\"{{ . }}\"\u003e {{- end -}} {{- if eq .Site.Params.enablePWA true -}} \u003clink rel=\"manifest\" href=\"/draft/site.webmanifest\"\u003e {{- end -}} {{- end -}} ","date":"2021-12-06","objectID":"/anr/posts/anr/:84:3","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#网站图标-6"},{"categories":null,"content":"补充缺失的中文译文 创建i18n/zh-CN.toml # Translations for Simplified Chinese # 简体中文的翻译 # https://gohugo.io/content-management/multilingual/#translation-of-strings [authors] other = \"作者\" ","date":"2021-12-06","objectID":"/anr/posts/anr/:84:4","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#补充缺失的中文译文-6"},{"categories":null,"content":"作者配置 创建data/authors/dnasdw.toml name = \"dnasdw\" link = \"https://github.com/dnasdw\" 之后就可以在文章的Front Matter中使用authors: [dnasdw]. ","date":"2021-12-06","objectID":"/anr/posts/anr/:84:5","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#作者配置-6"},{"categories":null,"content":"配置PWA 创建content/offline/index.md --- title: \"离线\" --- \u003e 你没有连接至互联网, 只有缓存的页面可用. 修改static/site.webmanifest, 添加start_url, 并填写name/short_name/start_url. { \"name\": \"聚草稿\", \"short_name\": \"聚草稿\", \"start_url\": \"/draft/\", \"icons\": [ { \"src\": \"/draft/android-chrome-192x192.png\", \"sizes\": \"192x192\", \"type\": \"image/png\" }, { \"src\": \"/draft/android-chrome-512x512.png\", \"sizes\": \"512x512\", \"type\": \"image/png\" } ], \"theme_color\": \"#ffffff\", \"background_color\": \"#ffffff\", \"display\": \"standalone\" } 如果config中baseURL包含子目录, 则需要将themes/DoIt/assets/js/sw.js复制到assets/js/sw.js, 并将相关链接前加上/子目录名, 比如/css/style.min.css改为/darft/css/style.min.css; 同样修改static/site.webmanifest中的相关路径, 其中start_url从/改为/子目录名/, 比如\"start_url\": \"/\"改为\"start_url\": \"/draft/\"; 还需要将themes/DoIt/layouts/partials/footer.html复制到layouts/partials/footer.html, 并修改注册参数, 比如.register('/sw.min.js', { scope: '/' })改为.register('/draft/sw.min.js', { scope: '/draft/' }). 配置参考 const BASE_CACHE_FILES = [ '/draft/css/style.min.css', '/draft/js/theme.min.js', '/draft/site.webmanifest' ] const OFFLINE_CACHE_FILES = [ '/draft/css/style.min.css', '/draft/js/theme.min.js', '/draft/site.webmanifest', '/draft/offline' ] const NOT_FOUND_CACHE_FILES = [ '/draft/css/style.min.css', '/draft/js/theme.min.js', '/draft/site.webmanifest', '/draft/404.html' ] const OFFLINE_PAGE = '/draft/offline' const NOT_FOUND_PAGE = '/draft/404.html' ","date":"2021-12-06","objectID":"/anr/posts/anr/:84:6","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#配置pwa-6"},{"categories":null,"content":"安装静态网站生成器hugo-extended 官方教程 https://gohugo.io/getting-started/installing/ ","date":"2021-12-06","objectID":"/anr/posts/anr/:85:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#安装静态网站生成器hugo-extended-7"},{"categories":null,"content":"创建或使用守望者仓库watcher_test https://github.com/new https://github.com/dnasdw/watcher_test ","date":"2021-12-06","objectID":"/anr/posts/anr/:86:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#创建或使用守望者仓库watcher_test-7"},{"categories":null,"content":"创建部署仓库draft https://github.com/new https://github.com/dnasdw/draft ","date":"2021-12-06","objectID":"/anr/posts/anr/:87:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#创建部署仓库draft-7"},{"categories":null,"content":"创建评论仓库comments_test https://github.com/new https://github.com/dnasdw/comments_test ","date":"2021-12-06","objectID":"/anr/posts/anr/:88:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#创建评论仓库comments_test-7"},{"categories":null,"content":"创建源文件仓库pages_draft https://github.com/new https://github.com/dnasdw/pages_draft 克隆到本地并新建站点 git clone --recursive https://github.com/dnasdw/pages_draft.git hugo new site pages_draft --force cd pages_draft 创建.gitignore 内容来自https://github.com/github/gitignore/blob/main/community/Golang/Hugo.gitignore # Generated files by hugo /public/ /resources/_gen/ /assets/jsconfig.json hugo_stats.json # Executable may be added to repository hugo.exe hugo.darwin hugo.linux # Temporary lock file while building /.hugo_build.lock 添加主题 git submodule add https://github.com/dnasdw/DoIt.git themes/DoIt 修改config.toml baseURL = \"https://dnasdw.github.io/draft\" defaultContentLanguage = \"zh-cn\" theme = \"DoIt\" title = \"聚草稿\" [languages] [languages.zh-cn] languageCode = \"zh-CN\" hasCJKLanguage = true [params] version = \"0.2.X\" 提交推送 git add * git commit -m setup git push origin master ","date":"2021-12-06","objectID":"/anr/posts/anr/:89:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#创建源文件仓库pages_draft-7"},{"categories":null,"content":"创建MY_GITHUB_TOKEN 查看是否已有token https://github.com/settings/tokens 如果没有则新建token https://github.com/settings/tokens/new 配置参考 Note: actions-gh-pages Expiration: No expiration Select scopes: [v] repo ","date":"2021-12-06","objectID":"/anr/posts/anr/:90:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#创建my_github_token-7"},{"categories":null,"content":"把MY_GITHUB_TOKEN配置到守望者仓库中 查看是否已配置token https://github.com/dnasdw/watcher_test/settings/secrets/actions 如果没有则配置token https://github.com/dnasdw/watcher_test/settings/secrets/actions/new 配置参考 MY_GITHUB_TOKEN: ghp_* ","date":"2021-12-06","objectID":"/anr/posts/anr/:91:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#把my_github_token配置到守望者仓库中-7"},{"categories":null,"content":"配置守望者 克隆到本地 git clone --recursive https://github.com/dnasdw/watcher_test.git cd watcher_test git submodule add https://github.com/dnasdw/pages_draft.git pages_draft 创建github actions配置.github/workflows/draft-gh-pages.yml 配置参考 name:GitHub Pageson:workflow_dispatch:inputs:commit_id:description:The branch, tag or SHA of the submodule to checkout.required:falsedefault:push:branches:- masterjobs:deploy:runs-on:ubuntu-20.04concurrency:group:${{ github.workflow }}-${{ github.ref }}steps:- uses:actions/checkout@v2with:token:${{ secrets.MY_GITHUB_TOKEN }}submodules:recursivefetch-depth:0- name:Checkout submodule with github tokenif:${{ github.event.inputs.commit_id != '' }}uses:actions/checkout@v2with:repository:dnasdw/pages_draftpath:pages_draftref:${{ github.event.inputs.commit_id }}token:${{ secrets.MY_GITHUB_TOKEN }}submodules:recursivefetch-depth:0- name:Get full commit message like peaceiris/actions-gh-pages@v3working-directory:./pages_draftrun:|printf -v FULL_COMMIT_MESSAGE %s \"$(git log -1 --pretty=format:%B) dnasdw/pages_draft@$(git log -1 --pretty=format:%H)\" echo \"$FULL_COMMIT_MESSAGE\" echo \"FULL_COMMIT_MESSAGE\u003c\u003cEOF\" \u003e\u003e $GITHUB_ENV echo \"$FULL_COMMIT_MESSAGE\" \u003e\u003e $GITHUB_ENV echo \"EOF\" \u003e\u003e $GITHUB_ENV- name:Disable quotePathworking-directory:./pages_draftrun:git config core.quotePath false- name:Setup Hugouses:peaceiris/actions-hugo@v2with:hugo-version:latestextended:true- name:Buildworking-directory:./pages_draftrun:hugo --minify- name:Deployuses:peaceiris/actions-gh-pages@v3if:${{ github.ref == 'refs/heads/master' }}with:personal_token:${{ secrets.MY_GITHUB_TOKEN }}external_repository:dnasdw/draftpublish_branch:gh-pagespublish_dir:./pages_draft/publicforce_orphan:falseuser_name:Sun Daowenuser_email:sundaowen@gmail.comfull_commit_message:${{ env.FULL_COMMIT_MESSAGE }} 提交推送 git add * git commit -m \"setup pages\" git push origin master ","date":"2021-12-06","objectID":"/anr/posts/anr/:92:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#配置守望者-7"},{"categories":null,"content":"配置中转worker 教程 https://github.com/dnasdw/workflow_dispatch-worker 配置参考 GITHUB_WEBHOOK_SECRET: 2008* Payload URL: https://webhook_workflow_dispatch-worker.dnasdw.workers.dev/api/github/repos/dnasdw/watcher_test/actions/workflows/draft-gh-pages.yml/dispatches ","date":"2021-12-06","objectID":"/anr/posts/anr/:93:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#配置中转worker-7"},{"categories":null,"content":"github pages地址 配置地址 https://github.com/dnasdw/draft/settings/pages 页面地址 https://dnasdw.github.io/draft/ ","date":"2021-12-06","objectID":"/anr/posts/anr/:94:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#github-pages地址-7"},{"categories":null,"content":"安装评论系统 https://utteranc.es/ 应用地址 https://github.com/apps/utterances 配置权限 Only select repositories: dnasdw/comments_test ","date":"2021-12-06","objectID":"/anr/posts/anr/:95:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#安装评论系统-7"},{"categories":null,"content":"更新config 配置参考 baseURL = \"https://dnasdw.github.io/draft\" # [en, zh-cn, fr, pl, ...] determines default content language # [en, zh-cn, fr, pl, ...] 设置默认的语言 defaultContentLanguage = \"zh-cn\" # theme # 主题 theme = \"DoIt\" # themes directory # 主题目录 # themesDir = \"themes\" # website title # 网站标题 # TODO title = \"聚草稿\" # whether to use robots.txt # 是否使用 robots.txt enableRobotsTXT = true # whether to use git commit log # 是否使用 git 信息 enableGitInfo = true # whether to use emoji code # 是否使用 emoji 代码 enableEmoji = true [languages] [languages.zh-cn] weight = 1 # 网站语言, 仅在这里 CN 大写 languageCode = \"zh-CN\" # 语言名称 languageName = \"简体中文\" # 是否包括中日韩文字 hasCJKLanguage = true # 默认每页列表显示的文章数目 paginate = 10 # [UA-XXXXXXXX-X] 谷歌分析代号 googleAnalytics = \"\" # 版权描述，仅仅用于 SEO copyright = \"This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.\" # 菜单配置 [languages.zh-cn.menu] [[languages.zh-cn.menu.main]] identifier = \"posts\" # 你可以在名称 (允许 HTML 格式) 之前添加其他信息, 例如图标 pre = \"\" # 你可以在名称 (允许 HTML 格式) 之后添加其他信息, 例如图标 post = \"\" name = \"所有文章\" url = \"posts/\" title = \"\" weight = 1 [[languages.zh-cn.menu.main]] identifier = \"tags\" pre = \"\" post = \"\" name = \"标签\" url = \"tags/\" title = \"\" weight = 2 [[languages.zh-cn.menu.main]] identifier = \"categories\" pre = \"\" post = \"\" name = \"分类\" url = \"categories/\" title = \"\" weight = 3 [[languages.zh-cn.menu.main]] identifier = \"series\" pre = \"\" post = \"\" name = \"系列\" url = \"series/\" title = \"\" weight = 4 [[languages.zh-cn.menu.main]] identifier = \"authors\" pre = \"\" post = \"\" name = \"作者\" url = \"authors/\" title = \"\" weight = 5 # TODO [[languages.zh-cn.menu.main]] identifier = \"github\" pre = \"\u003ci class='fab fa-github fa-fw'\u003e\u003c/i\u003e\" post = \"\" name = \"\" url = \"https://github.com/dnasdw/draft\" title = \"GitHub\" weight = 9 [languages.zh-cn.params] # 网站描述 # TODO description = \"聚草稿\" # 网站关键词 # TODO keywords = [\"聚草稿\", \"\"] # 应用图标配置 [languages.zh-cn.params.app] # 当添加到 iOS 主屏幕或者 Android 启动器时的标题, 覆盖默认标题 # TODO title = \"聚草稿\" # 是否隐藏网站图标资源链接 noFavicon = false # 更现代的 SVG 网站图标, 可替代旧的 .png 和 .ico 文件 svgFavicon = \"\" # Safari 图标颜色 iconColor = \"#5bbad5\" # Windows v8-10 磁贴颜色 tileColor = \"#da532c\" # 搜索配置 [languages.zh-cn.params.search] enable = true # 搜索引擎的类型 (\"lunr\", \"algolia\", \"fuse\") type = \"fuse\" # 文章内容最长索引长度 contentLength = 4000 # 搜索框的占位提示语 placeholder = \"\" # 最大结果数目 maxResultLength = 10 # 结果内容片段长度 snippetLength = 50 # 搜索结果中高亮部分的 HTML 标签 highlightTag = \"em\" # 是否在搜索索引中使用基于 baseURL 的绝对路径 absoluteURL = false [languages.zh-cn.params.search.algolia] index = \"\" appID = \"\" searchKey = \"\" [languages.zh-cn.params.search.fuse] # https://fusejs.io/api/options.html isCaseSensitive = false minMatchCharLength = 1 findAllMatches = false location = 0 threshold = 0.1 distance = 100 ignoreLocation = true useExtendedSearch = false ignoreFieldNorm = false # 主页信息设置 [languages.zh-cn.params.home] # RSS 文章数目 rss = 10 # 主页个人信息 [languages.zh-cn.params.home.profile] enable = true # Gravatar 邮箱，用于优先在主页显示的头像 gravatarEmail = \"\" # 主页显示头像的 URL avatarURL = \"/images/dnasdw256.png\" # 主页显示的网站标题 (支持 HTML 格式) title = \"\" # 主页显示的网站副标题 # TODO subtitle = \"\" # 是否为副标题显示打字机动画 typeit = false # 是否显示社交账号 social = true # 免责声明 (支持 HTML 格式) disclaimer = \"\" # 主页文章列表 [languages.zh-cn.params.home.posts] enable = true # 主页每页显示文章数量 paginate = 10 # 主页的社交信息设置 [languages.zh-cn.params.social] GitHub = \"dnasdw\" Linkedin = \"\" Twitter = \"sundaowen\" Instagram = \"\" Facebook = \"\" Telegram = \"\" Medium = \"\" Gitlab = \"dnasdw\" Youtubelegacy = \"\" Youtubecustom = \"\" Youtubechannel = \"\" Tumblr = \"\" Quora = \"\" Keybase = \"\" Pinterest = \"\" Reddit = \"\" Codepen = \"\" FreeCodeCamp = \"\" Bitbucket = \"dnasdw\" Stackoverflow = \"\" Weibo = \"dnasdw\" Odnoklassniki = \"\" VK = \"\" Flickr = \"\" Xing = \"\" Snapchat = \"\" Soundcloud = \"\" Spotify = \"\" Bandcamp = \"\" Paypal = \"\" Fivehundredpx = \"\" Mix = \"\" Goodreads = \"\" Lastfm = \"\" Foursquare = \"\" Hackernews = \"\" Kickstarter = \"\" Patreon = \"\" Steam = \"dnasdw\" Twitch = \"\" Strava = \"\" Skype = \"\" Whatsapp = \"\" Zhihu = \"dnasdw\" Douban = \"\" Angellist = \"\" Slidershare = \"\" Jsfiddle =","date":"2021-12-06","objectID":"/anr/posts/anr/:96:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#更新config-7"},{"categories":null,"content":"菜单url 如果config中baseURL包含子目录, 则menu配置中的url不能以斜杠开始, 比如\"所有文章\"的url不可以为/posts/, 但可以为posts/或./posts/. ","date":"2021-12-06","objectID":"/anr/posts/anr/:96:1","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#菜单url-7"},{"categories":null,"content":"头像文件 创建assets/images/dnasdw256.png, 并将config中的头像路径改为/images/dnasdw256.png. ","date":"2021-12-06","objectID":"/anr/posts/anr/:96:2","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#头像文件-7"},{"categories":null,"content":"网站图标 准备一个512x512的图标, 比如去https://www.flaticon.com/搜索一个合适的. 去https://realfavicongenerator.net/上传图标, 下载得到图标配置包, 解压到static目录. 如果config中baseURL包含子目录, 则需要将themes/DoIt/layouts/partials/head/link.html复制到layouts/partials/head/link.html, 并将favicon部分的链接前加上/子目录名, 比如href=\"/favicon.ico\"改为href=\"/draft/favicon.ico\". 配置参考 {{- if not .Site.Params.app.noFavicon -}} {{- with .Site.Params.app.svgFavicon -}} \u003clink rel=\"icon\" href=\"{{ . }}\"\u003e {{- else -}} \u003clink rel=\"shortcut icon\" type=\"image/x-icon\" href=\"/draft/favicon.ico\" /\u003e \u003clink rel=\"icon\" type=\"image/png\" sizes=\"32x32\" href=\"/draft/favicon-32x32.png\"\u003e \u003clink rel=\"icon\" type=\"image/png\" sizes=\"16x16\" href=\"/draft/favicon-16x16.png\"\u003e {{- end -}} \u003clink rel=\"apple-touch-icon\" sizes=\"180x180\" href=\"/draft/apple-touch-icon.png\"\u003e {{- with .Site.Params.app.iconColor -}} \u003clink rel=\"mask-icon\" href=\"/draft/safari-pinned-tab.svg\" color=\"{{ . }}\"\u003e {{- end -}} {{- if eq .Site.Params.enablePWA true -}} \u003clink rel=\"manifest\" href=\"/draft/site.webmanifest\"\u003e {{- end -}} {{- end -}} ","date":"2021-12-06","objectID":"/anr/posts/anr/:96:3","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#网站图标-7"},{"categories":null,"content":"补充缺失的中文译文 创建i18n/zh-CN.toml # Translations for Simplified Chinese # 简体中文的翻译 # https://gohugo.io/content-management/multilingual/#translation-of-strings [authors] other = \"作者\" ","date":"2021-12-06","objectID":"/anr/posts/anr/:96:4","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#补充缺失的中文译文-7"},{"categories":null,"content":"作者配置 创建data/authors/dnasdw.toml name = \"dnasdw\" link = \"https://github.com/dnasdw\" 之后就可以在文章的Front Matter中使用authors: [dnasdw]. ","date":"2021-12-06","objectID":"/anr/posts/anr/:96:5","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#作者配置-7"},{"categories":null,"content":"配置PWA 创建content/offline/index.md --- title: \"离线\" --- \u003e 你没有连接至互联网, 只有缓存的页面可用. 修改static/site.webmanifest, 添加start_url, 并填写name/short_name/start_url. { \"name\": \"聚草稿\", \"short_name\": \"聚草稿\", \"start_url\": \"/draft/\", \"icons\": [ { \"src\": \"/draft/android-chrome-192x192.png\", \"sizes\": \"192x192\", \"type\": \"image/png\" }, { \"src\": \"/draft/android-chrome-512x512.png\", \"sizes\": \"512x512\", \"type\": \"image/png\" } ], \"theme_color\": \"#ffffff\", \"background_color\": \"#ffffff\", \"display\": \"standalone\" } 如果config中baseURL包含子目录, 则需要将themes/DoIt/assets/js/sw.js复制到assets/js/sw.js, 并将相关链接前加上/子目录名, 比如/css/style.min.css改为/darft/css/style.min.css; 同样修改static/site.webmanifest中的相关路径, 其中start_url从/改为/子目录名/, 比如\"start_url\": \"/\"改为\"start_url\": \"/draft/\"; 还需要将themes/DoIt/layouts/partials/footer.html复制到layouts/partials/footer.html, 并修改注册参数, 比如.register('/sw.min.js', { scope: '/' })改为.register('/draft/sw.min.js', { scope: '/draft/' }). 配置参考 const BASE_CACHE_FILES = [ '/draft/css/style.min.css', '/draft/js/theme.min.js', '/draft/site.webmanifest' ] const OFFLINE_CACHE_FILES = [ '/draft/css/style.min.css', '/draft/js/theme.min.js', '/draft/site.webmanifest', '/draft/offline' ] const NOT_FOUND_CACHE_FILES = [ '/draft/css/style.min.css', '/draft/js/theme.min.js', '/draft/site.webmanifest', '/draft/404.html' ] const OFFLINE_PAGE = '/draft/offline' const NOT_FOUND_PAGE = '/draft/404.html' ","date":"2021-12-06","objectID":"/anr/posts/anr/:96:6","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#配置pwa-7"},{"categories":null,"content":"安装静态网站生成器hugo-extended 官方教程 https://gohugo.io/getting-started/installing/ ","date":"2021-12-06","objectID":"/anr/posts/anr/:97:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#安装静态网站生成器hugo-extended-8"},{"categories":null,"content":"创建或使用守望者仓库watcher_test https://github.com/new https://github.com/dnasdw/watcher_test ","date":"2021-12-06","objectID":"/anr/posts/anr/:98:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#创建或使用守望者仓库watcher_test-8"},{"categories":null,"content":"创建部署仓库draft https://github.com/new https://github.com/dnasdw/draft ","date":"2021-12-06","objectID":"/anr/posts/anr/:99:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#创建部署仓库draft-8"},{"categories":null,"content":"创建评论仓库comments_test https://github.com/new https://github.com/dnasdw/comments_test ","date":"2021-12-06","objectID":"/anr/posts/anr/:100:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#创建评论仓库comments_test-8"},{"categories":null,"content":"创建源文件仓库pages_draft https://github.com/new https://github.com/dnasdw/pages_draft 克隆到本地并新建站点 git clone --recursive https://github.com/dnasdw/pages_draft.git hugo new site pages_draft --force cd pages_draft 创建.gitignore 内容来自https://github.com/github/gitignore/blob/main/community/Golang/Hugo.gitignore # Generated files by hugo /public/ /resources/_gen/ /assets/jsconfig.json hugo_stats.json # Executable may be added to repository hugo.exe hugo.darwin hugo.linux # Temporary lock file while building /.hugo_build.lock 添加主题 git submodule add https://github.com/dnasdw/DoIt.git themes/DoIt 修改config.toml baseURL = \"https://dnasdw.github.io/draft\" defaultContentLanguage = \"zh-cn\" theme = \"DoIt\" title = \"聚草稿\" [languages] [languages.zh-cn] languageCode = \"zh-CN\" hasCJKLanguage = true [params] version = \"0.2.X\" 提交推送 git add * git commit -m setup git push origin master ","date":"2021-12-06","objectID":"/anr/posts/anr/:101:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#创建源文件仓库pages_draft-8"},{"categories":null,"content":"创建MY_GITHUB_TOKEN 查看是否已有token https://github.com/settings/tokens 如果没有则新建token https://github.com/settings/tokens/new 配置参考 Note: actions-gh-pages Expiration: No expiration Select scopes: [v] repo ","date":"2021-12-06","objectID":"/anr/posts/anr/:102:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#创建my_github_token-8"},{"categories":null,"content":"把MY_GITHUB_TOKEN配置到守望者仓库中 查看是否已配置token https://github.com/dnasdw/watcher_test/settings/secrets/actions 如果没有则配置token https://github.com/dnasdw/watcher_test/settings/secrets/actions/new 配置参考 MY_GITHUB_TOKEN: ghp_* ","date":"2021-12-06","objectID":"/anr/posts/anr/:103:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#把my_github_token配置到守望者仓库中-8"},{"categories":null,"content":"配置守望者 克隆到本地 git clone --recursive https://github.com/dnasdw/watcher_test.git cd watcher_test git submodule add https://github.com/dnasdw/pages_draft.git pages_draft 创建github actions配置.github/workflows/draft-gh-pages.yml 配置参考 name:GitHub Pageson:workflow_dispatch:inputs:commit_id:description:The branch, tag or SHA of the submodule to checkout.required:falsedefault:push:branches:- masterjobs:deploy:runs-on:ubuntu-20.04concurrency:group:${{ github.workflow }}-${{ github.ref }}steps:- uses:actions/checkout@v2with:token:${{ secrets.MY_GITHUB_TOKEN }}submodules:recursivefetch-depth:0- name:Checkout submodule with github tokenif:${{ github.event.inputs.commit_id != '' }}uses:actions/checkout@v2with:repository:dnasdw/pages_draftpath:pages_draftref:${{ github.event.inputs.commit_id }}token:${{ secrets.MY_GITHUB_TOKEN }}submodules:recursivefetch-depth:0- name:Get full commit message like peaceiris/actions-gh-pages@v3working-directory:./pages_draftrun:|printf -v FULL_COMMIT_MESSAGE %s \"$(git log -1 --pretty=format:%B) dnasdw/pages_draft@$(git log -1 --pretty=format:%H)\" echo \"$FULL_COMMIT_MESSAGE\" echo \"FULL_COMMIT_MESSAGE\u003c\u003cEOF\" \u003e\u003e $GITHUB_ENV echo \"$FULL_COMMIT_MESSAGE\" \u003e\u003e $GITHUB_ENV echo \"EOF\" \u003e\u003e $GITHUB_ENV- name:Disable quotePathworking-directory:./pages_draftrun:git config core.quotePath false- name:Setup Hugouses:peaceiris/actions-hugo@v2with:hugo-version:latestextended:true- name:Buildworking-directory:./pages_draftrun:hugo --minify- name:Deployuses:peaceiris/actions-gh-pages@v3if:${{ github.ref == 'refs/heads/master' }}with:personal_token:${{ secrets.MY_GITHUB_TOKEN }}external_repository:dnasdw/draftpublish_branch:gh-pagespublish_dir:./pages_draft/publicforce_orphan:falseuser_name:Sun Daowenuser_email:sundaowen@gmail.comfull_commit_message:${{ env.FULL_COMMIT_MESSAGE }} 提交推送 git add * git commit -m \"setup pages\" git push origin master ","date":"2021-12-06","objectID":"/anr/posts/anr/:104:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#配置守望者-8"},{"categories":null,"content":"配置中转worker 教程 https://github.com/dnasdw/workflow_dispatch-worker 配置参考 GITHUB_WEBHOOK_SECRET: 2008* Payload URL: https://webhook_workflow_dispatch-worker.dnasdw.workers.dev/api/github/repos/dnasdw/watcher_test/actions/workflows/draft-gh-pages.yml/dispatches ","date":"2021-12-06","objectID":"/anr/posts/anr/:105:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#配置中转worker-8"},{"categories":null,"content":"github pages地址 配置地址 https://github.com/dnasdw/draft/settings/pages 页面地址 https://dnasdw.github.io/draft/ ","date":"2021-12-06","objectID":"/anr/posts/anr/:106:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#github-pages地址-8"},{"categories":null,"content":"安装评论系统 https://utteranc.es/ 应用地址 https://github.com/apps/utterances 配置权限 Only select repositories: dnasdw/comments_test ","date":"2021-12-06","objectID":"/anr/posts/anr/:107:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#安装评论系统-8"},{"categories":null,"content":"更新config 配置参考 baseURL = \"https://dnasdw.github.io/draft\" # [en, zh-cn, fr, pl, ...] determines default content language # [en, zh-cn, fr, pl, ...] 设置默认的语言 defaultContentLanguage = \"zh-cn\" # theme # 主题 theme = \"DoIt\" # themes directory # 主题目录 # themesDir = \"themes\" # website title # 网站标题 # TODO title = \"聚草稿\" # whether to use robots.txt # 是否使用 robots.txt enableRobotsTXT = true # whether to use git commit log # 是否使用 git 信息 enableGitInfo = true # whether to use emoji code # 是否使用 emoji 代码 enableEmoji = true [languages] [languages.zh-cn] weight = 1 # 网站语言, 仅在这里 CN 大写 languageCode = \"zh-CN\" # 语言名称 languageName = \"简体中文\" # 是否包括中日韩文字 hasCJKLanguage = true # 默认每页列表显示的文章数目 paginate = 10 # [UA-XXXXXXXX-X] 谷歌分析代号 googleAnalytics = \"\" # 版权描述，仅仅用于 SEO copyright = \"This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.\" # 菜单配置 [languages.zh-cn.menu] [[languages.zh-cn.menu.main]] identifier = \"posts\" # 你可以在名称 (允许 HTML 格式) 之前添加其他信息, 例如图标 pre = \"\" # 你可以在名称 (允许 HTML 格式) 之后添加其他信息, 例如图标 post = \"\" name = \"所有文章\" url = \"posts/\" title = \"\" weight = 1 [[languages.zh-cn.menu.main]] identifier = \"tags\" pre = \"\" post = \"\" name = \"标签\" url = \"tags/\" title = \"\" weight = 2 [[languages.zh-cn.menu.main]] identifier = \"categories\" pre = \"\" post = \"\" name = \"分类\" url = \"categories/\" title = \"\" weight = 3 [[languages.zh-cn.menu.main]] identifier = \"series\" pre = \"\" post = \"\" name = \"系列\" url = \"series/\" title = \"\" weight = 4 [[languages.zh-cn.menu.main]] identifier = \"authors\" pre = \"\" post = \"\" name = \"作者\" url = \"authors/\" title = \"\" weight = 5 # TODO [[languages.zh-cn.menu.main]] identifier = \"github\" pre = \"\u003ci class='fab fa-github fa-fw'\u003e\u003c/i\u003e\" post = \"\" name = \"\" url = \"https://github.com/dnasdw/draft\" title = \"GitHub\" weight = 9 [languages.zh-cn.params] # 网站描述 # TODO description = \"聚草稿\" # 网站关键词 # TODO keywords = [\"聚草稿\", \"\"] # 应用图标配置 [languages.zh-cn.params.app] # 当添加到 iOS 主屏幕或者 Android 启动器时的标题, 覆盖默认标题 # TODO title = \"聚草稿\" # 是否隐藏网站图标资源链接 noFavicon = false # 更现代的 SVG 网站图标, 可替代旧的 .png 和 .ico 文件 svgFavicon = \"\" # Safari 图标颜色 iconColor = \"#5bbad5\" # Windows v8-10 磁贴颜色 tileColor = \"#da532c\" # 搜索配置 [languages.zh-cn.params.search] enable = true # 搜索引擎的类型 (\"lunr\", \"algolia\", \"fuse\") type = \"fuse\" # 文章内容最长索引长度 contentLength = 4000 # 搜索框的占位提示语 placeholder = \"\" # 最大结果数目 maxResultLength = 10 # 结果内容片段长度 snippetLength = 50 # 搜索结果中高亮部分的 HTML 标签 highlightTag = \"em\" # 是否在搜索索引中使用基于 baseURL 的绝对路径 absoluteURL = false [languages.zh-cn.params.search.algolia] index = \"\" appID = \"\" searchKey = \"\" [languages.zh-cn.params.search.fuse] # https://fusejs.io/api/options.html isCaseSensitive = false minMatchCharLength = 1 findAllMatches = false location = 0 threshold = 0.1 distance = 100 ignoreLocation = true useExtendedSearch = false ignoreFieldNorm = false # 主页信息设置 [languages.zh-cn.params.home] # RSS 文章数目 rss = 10 # 主页个人信息 [languages.zh-cn.params.home.profile] enable = true # Gravatar 邮箱，用于优先在主页显示的头像 gravatarEmail = \"\" # 主页显示头像的 URL avatarURL = \"/images/dnasdw256.png\" # 主页显示的网站标题 (支持 HTML 格式) title = \"\" # 主页显示的网站副标题 # TODO subtitle = \"\" # 是否为副标题显示打字机动画 typeit = false # 是否显示社交账号 social = true # 免责声明 (支持 HTML 格式) disclaimer = \"\" # 主页文章列表 [languages.zh-cn.params.home.posts] enable = true # 主页每页显示文章数量 paginate = 10 # 主页的社交信息设置 [languages.zh-cn.params.social] GitHub = \"dnasdw\" Linkedin = \"\" Twitter = \"sundaowen\" Instagram = \"\" Facebook = \"\" Telegram = \"\" Medium = \"\" Gitlab = \"dnasdw\" Youtubelegacy = \"\" Youtubecustom = \"\" Youtubechannel = \"\" Tumblr = \"\" Quora = \"\" Keybase = \"\" Pinterest = \"\" Reddit = \"\" Codepen = \"\" FreeCodeCamp = \"\" Bitbucket = \"dnasdw\" Stackoverflow = \"\" Weibo = \"dnasdw\" Odnoklassniki = \"\" VK = \"\" Flickr = \"\" Xing = \"\" Snapchat = \"\" Soundcloud = \"\" Spotify = \"\" Bandcamp = \"\" Paypal = \"\" Fivehundredpx = \"\" Mix = \"\" Goodreads = \"\" Lastfm = \"\" Foursquare = \"\" Hackernews = \"\" Kickstarter = \"\" Patreon = \"\" Steam = \"dnasdw\" Twitch = \"\" Strava = \"\" Skype = \"\" Whatsapp = \"\" Zhihu = \"dnasdw\" Douban = \"\" Angellist = \"\" Slidershare = \"\" Jsfiddle =","date":"2021-12-06","objectID":"/anr/posts/anr/:108:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#更新config-8"},{"categories":null,"content":"菜单url 如果config中baseURL包含子目录, 则menu配置中的url不能以斜杠开始, 比如\"所有文章\"的url不可以为/posts/, 但可以为posts/或./posts/. ","date":"2021-12-06","objectID":"/anr/posts/anr/:108:1","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#菜单url-8"},{"categories":null,"content":"头像文件 创建assets/images/dnasdw256.png, 并将config中的头像路径改为/images/dnasdw256.png. ","date":"2021-12-06","objectID":"/anr/posts/anr/:108:2","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#头像文件-8"},{"categories":null,"content":"网站图标 准备一个512x512的图标, 比如去https://www.flaticon.com/搜索一个合适的. 去https://realfavicongenerator.net/上传图标, 下载得到图标配置包, 解压到static目录. 如果config中baseURL包含子目录, 则需要将themes/DoIt/layouts/partials/head/link.html复制到layouts/partials/head/link.html, 并将favicon部分的链接前加上/子目录名, 比如href=\"/favicon.ico\"改为href=\"/draft/favicon.ico\". 配置参考 {{- if not .Site.Params.app.noFavicon -}} {{- with .Site.Params.app.svgFavicon -}} \u003clink rel=\"icon\" href=\"{{ . }}\"\u003e {{- else -}} \u003clink rel=\"shortcut icon\" type=\"image/x-icon\" href=\"/draft/favicon.ico\" /\u003e \u003clink rel=\"icon\" type=\"image/png\" sizes=\"32x32\" href=\"/draft/favicon-32x32.png\"\u003e \u003clink rel=\"icon\" type=\"image/png\" sizes=\"16x16\" href=\"/draft/favicon-16x16.png\"\u003e {{- end -}} \u003clink rel=\"apple-touch-icon\" sizes=\"180x180\" href=\"/draft/apple-touch-icon.png\"\u003e {{- with .Site.Params.app.iconColor -}} \u003clink rel=\"mask-icon\" href=\"/draft/safari-pinned-tab.svg\" color=\"{{ . }}\"\u003e {{- end -}} {{- if eq .Site.Params.enablePWA true -}} \u003clink rel=\"manifest\" href=\"/draft/site.webmanifest\"\u003e {{- end -}} {{- end -}} ","date":"2021-12-06","objectID":"/anr/posts/anr/:108:3","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#网站图标-8"},{"categories":null,"content":"补充缺失的中文译文 创建i18n/zh-CN.toml # Translations for Simplified Chinese # 简体中文的翻译 # https://gohugo.io/content-management/multilingual/#translation-of-strings [authors] other = \"作者\" ","date":"2021-12-06","objectID":"/anr/posts/anr/:108:4","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#补充缺失的中文译文-8"},{"categories":null,"content":"作者配置 创建data/authors/dnasdw.toml name = \"dnasdw\" link = \"https://github.com/dnasdw\" 之后就可以在文章的Front Matter中使用authors: [dnasdw]. ","date":"2021-12-06","objectID":"/anr/posts/anr/:108:5","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#作者配置-8"},{"categories":null,"content":"配置PWA 创建content/offline/index.md --- title: \"离线\" --- \u003e 你没有连接至互联网, 只有缓存的页面可用. 修改static/site.webmanifest, 添加start_url, 并填写name/short_name/start_url. { \"name\": \"聚草稿\", \"short_name\": \"聚草稿\", \"start_url\": \"/draft/\", \"icons\": [ { \"src\": \"/draft/android-chrome-192x192.png\", \"sizes\": \"192x192\", \"type\": \"image/png\" }, { \"src\": \"/draft/android-chrome-512x512.png\", \"sizes\": \"512x512\", \"type\": \"image/png\" } ], \"theme_color\": \"#ffffff\", \"background_color\": \"#ffffff\", \"display\": \"standalone\" } 如果config中baseURL包含子目录, 则需要将themes/DoIt/assets/js/sw.js复制到assets/js/sw.js, 并将相关链接前加上/子目录名, 比如/css/style.min.css改为/darft/css/style.min.css; 同样修改static/site.webmanifest中的相关路径, 其中start_url从/改为/子目录名/, 比如\"start_url\": \"/\"改为\"start_url\": \"/draft/\"; 还需要将themes/DoIt/layouts/partials/footer.html复制到layouts/partials/footer.html, 并修改注册参数, 比如.register('/sw.min.js', { scope: '/' })改为.register('/draft/sw.min.js', { scope: '/draft/' }). 配置参考 const BASE_CACHE_FILES = [ '/draft/css/style.min.css', '/draft/js/theme.min.js', '/draft/site.webmanifest' ] const OFFLINE_CACHE_FILES = [ '/draft/css/style.min.css', '/draft/js/theme.min.js', '/draft/site.webmanifest', '/draft/offline' ] const NOT_FOUND_CACHE_FILES = [ '/draft/css/style.min.css', '/draft/js/theme.min.js', '/draft/site.webmanifest', '/draft/404.html' ] const OFFLINE_PAGE = '/draft/offline' const NOT_FOUND_PAGE = '/draft/404.html' ","date":"2021-12-06","objectID":"/anr/posts/anr/:108:6","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#配置pwa-8"},{"categories":null,"content":"安装静态网站生成器hugo-extended 官方教程 https://gohugo.io/getting-started/installing/ ","date":"2021-12-06","objectID":"/anr/posts/anr/:109:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#安装静态网站生成器hugo-extended-9"},{"categories":null,"content":"创建或使用守望者仓库watcher_test https://github.com/new https://github.com/dnasdw/watcher_test ","date":"2021-12-06","objectID":"/anr/posts/anr/:110:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#创建或使用守望者仓库watcher_test-9"},{"categories":null,"content":"创建部署仓库draft https://github.com/new https://github.com/dnasdw/draft ","date":"2021-12-06","objectID":"/anr/posts/anr/:111:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#创建部署仓库draft-9"},{"categories":null,"content":"创建评论仓库comments_test https://github.com/new https://github.com/dnasdw/comments_test ","date":"2021-12-06","objectID":"/anr/posts/anr/:112:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#创建评论仓库comments_test-9"},{"categories":null,"content":"创建源文件仓库pages_draft https://github.com/new https://github.com/dnasdw/pages_draft 克隆到本地并新建站点 git clone --recursive https://github.com/dnasdw/pages_draft.git hugo new site pages_draft --force cd pages_draft 创建.gitignore 内容来自https://github.com/github/gitignore/blob/main/community/Golang/Hugo.gitignore # Generated files by hugo /public/ /resources/_gen/ /assets/jsconfig.json hugo_stats.json # Executable may be added to repository hugo.exe hugo.darwin hugo.linux # Temporary lock file while building /.hugo_build.lock 添加主题 git submodule add https://github.com/dnasdw/DoIt.git themes/DoIt 修改config.toml baseURL = \"https://dnasdw.github.io/draft\" defaultContentLanguage = \"zh-cn\" theme = \"DoIt\" title = \"聚草稿\" [languages] [languages.zh-cn] languageCode = \"zh-CN\" hasCJKLanguage = true [params] version = \"0.2.X\" 提交推送 git add * git commit -m setup git push origin master ","date":"2021-12-06","objectID":"/anr/posts/anr/:113:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#创建源文件仓库pages_draft-9"},{"categories":null,"content":"创建MY_GITHUB_TOKEN 查看是否已有token https://github.com/settings/tokens 如果没有则新建token https://github.com/settings/tokens/new 配置参考 Note: actions-gh-pages Expiration: No expiration Select scopes: [v] repo ","date":"2021-12-06","objectID":"/anr/posts/anr/:114:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#创建my_github_token-9"},{"categories":null,"content":"把MY_GITHUB_TOKEN配置到守望者仓库中 查看是否已配置token https://github.com/dnasdw/watcher_test/settings/secrets/actions 如果没有则配置token https://github.com/dnasdw/watcher_test/settings/secrets/actions/new 配置参考 MY_GITHUB_TOKEN: ghp_* ","date":"2021-12-06","objectID":"/anr/posts/anr/:115:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#把my_github_token配置到守望者仓库中-9"},{"categories":null,"content":"配置守望者 克隆到本地 git clone --recursive https://github.com/dnasdw/watcher_test.git cd watcher_test git submodule add https://github.com/dnasdw/pages_draft.git pages_draft 创建github actions配置.github/workflows/draft-gh-pages.yml 配置参考 name:GitHub Pageson:workflow_dispatch:inputs:commit_id:description:The branch, tag or SHA of the submodule to checkout.required:falsedefault:push:branches:- masterjobs:deploy:runs-on:ubuntu-20.04concurrency:group:${{ github.workflow }}-${{ github.ref }}steps:- uses:actions/checkout@v2with:token:${{ secrets.MY_GITHUB_TOKEN }}submodules:recursivefetch-depth:0- name:Checkout submodule with github tokenif:${{ github.event.inputs.commit_id != '' }}uses:actions/checkout@v2with:repository:dnasdw/pages_draftpath:pages_draftref:${{ github.event.inputs.commit_id }}token:${{ secrets.MY_GITHUB_TOKEN }}submodules:recursivefetch-depth:0- name:Get full commit message like peaceiris/actions-gh-pages@v3working-directory:./pages_draftrun:|printf -v FULL_COMMIT_MESSAGE %s \"$(git log -1 --pretty=format:%B) dnasdw/pages_draft@$(git log -1 --pretty=format:%H)\" echo \"$FULL_COMMIT_MESSAGE\" echo \"FULL_COMMIT_MESSAGE\u003c\u003cEOF\" \u003e\u003e $GITHUB_ENV echo \"$FULL_COMMIT_MESSAGE\" \u003e\u003e $GITHUB_ENV echo \"EOF\" \u003e\u003e $GITHUB_ENV- name:Disable quotePathworking-directory:./pages_draftrun:git config core.quotePath false- name:Setup Hugouses:peaceiris/actions-hugo@v2with:hugo-version:latestextended:true- name:Buildworking-directory:./pages_draftrun:hugo --minify- name:Deployuses:peaceiris/actions-gh-pages@v3if:${{ github.ref == 'refs/heads/master' }}with:personal_token:${{ secrets.MY_GITHUB_TOKEN }}external_repository:dnasdw/draftpublish_branch:gh-pagespublish_dir:./pages_draft/publicforce_orphan:falseuser_name:Sun Daowenuser_email:sundaowen@gmail.comfull_commit_message:${{ env.FULL_COMMIT_MESSAGE }} 提交推送 git add * git commit -m \"setup pages\" git push origin master ","date":"2021-12-06","objectID":"/anr/posts/anr/:116:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#配置守望者-9"},{"categories":null,"content":"配置中转worker 教程 https://github.com/dnasdw/workflow_dispatch-worker 配置参考 GITHUB_WEBHOOK_SECRET: 2008* Payload URL: https://webhook_workflow_dispatch-worker.dnasdw.workers.dev/api/github/repos/dnasdw/watcher_test/actions/workflows/draft-gh-pages.yml/dispatches ","date":"2021-12-06","objectID":"/anr/posts/anr/:117:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#配置中转worker-9"},{"categories":null,"content":"github pages地址 配置地址 https://github.com/dnasdw/draft/settings/pages 页面地址 https://dnasdw.github.io/draft/ ","date":"2021-12-06","objectID":"/anr/posts/anr/:118:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#github-pages地址-9"},{"categories":null,"content":"安装评论系统 https://utteranc.es/ 应用地址 https://github.com/apps/utterances 配置权限 Only select repositories: dnasdw/comments_test ","date":"2021-12-06","objectID":"/anr/posts/anr/:119:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#安装评论系统-9"},{"categories":null,"content":"更新config 配置参考 baseURL = \"https://dnasdw.github.io/draft\" # [en, zh-cn, fr, pl, ...] determines default content language # [en, zh-cn, fr, pl, ...] 设置默认的语言 defaultContentLanguage = \"zh-cn\" # theme # 主题 theme = \"DoIt\" # themes directory # 主题目录 # themesDir = \"themes\" # website title # 网站标题 # TODO title = \"聚草稿\" # whether to use robots.txt # 是否使用 robots.txt enableRobotsTXT = true # whether to use git commit log # 是否使用 git 信息 enableGitInfo = true # whether to use emoji code # 是否使用 emoji 代码 enableEmoji = true [languages] [languages.zh-cn] weight = 1 # 网站语言, 仅在这里 CN 大写 languageCode = \"zh-CN\" # 语言名称 languageName = \"简体中文\" # 是否包括中日韩文字 hasCJKLanguage = true # 默认每页列表显示的文章数目 paginate = 10 # [UA-XXXXXXXX-X] 谷歌分析代号 googleAnalytics = \"\" # 版权描述，仅仅用于 SEO copyright = \"This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.\" # 菜单配置 [languages.zh-cn.menu] [[languages.zh-cn.menu.main]] identifier = \"posts\" # 你可以在名称 (允许 HTML 格式) 之前添加其他信息, 例如图标 pre = \"\" # 你可以在名称 (允许 HTML 格式) 之后添加其他信息, 例如图标 post = \"\" name = \"所有文章\" url = \"posts/\" title = \"\" weight = 1 [[languages.zh-cn.menu.main]] identifier = \"tags\" pre = \"\" post = \"\" name = \"标签\" url = \"tags/\" title = \"\" weight = 2 [[languages.zh-cn.menu.main]] identifier = \"categories\" pre = \"\" post = \"\" name = \"分类\" url = \"categories/\" title = \"\" weight = 3 [[languages.zh-cn.menu.main]] identifier = \"series\" pre = \"\" post = \"\" name = \"系列\" url = \"series/\" title = \"\" weight = 4 [[languages.zh-cn.menu.main]] identifier = \"authors\" pre = \"\" post = \"\" name = \"作者\" url = \"authors/\" title = \"\" weight = 5 # TODO [[languages.zh-cn.menu.main]] identifier = \"github\" pre = \"\u003ci class='fab fa-github fa-fw'\u003e\u003c/i\u003e\" post = \"\" name = \"\" url = \"https://github.com/dnasdw/draft\" title = \"GitHub\" weight = 9 [languages.zh-cn.params] # 网站描述 # TODO description = \"聚草稿\" # 网站关键词 # TODO keywords = [\"聚草稿\", \"\"] # 应用图标配置 [languages.zh-cn.params.app] # 当添加到 iOS 主屏幕或者 Android 启动器时的标题, 覆盖默认标题 # TODO title = \"聚草稿\" # 是否隐藏网站图标资源链接 noFavicon = false # 更现代的 SVG 网站图标, 可替代旧的 .png 和 .ico 文件 svgFavicon = \"\" # Safari 图标颜色 iconColor = \"#5bbad5\" # Windows v8-10 磁贴颜色 tileColor = \"#da532c\" # 搜索配置 [languages.zh-cn.params.search] enable = true # 搜索引擎的类型 (\"lunr\", \"algolia\", \"fuse\") type = \"fuse\" # 文章内容最长索引长度 contentLength = 4000 # 搜索框的占位提示语 placeholder = \"\" # 最大结果数目 maxResultLength = 10 # 结果内容片段长度 snippetLength = 50 # 搜索结果中高亮部分的 HTML 标签 highlightTag = \"em\" # 是否在搜索索引中使用基于 baseURL 的绝对路径 absoluteURL = false [languages.zh-cn.params.search.algolia] index = \"\" appID = \"\" searchKey = \"\" [languages.zh-cn.params.search.fuse] # https://fusejs.io/api/options.html isCaseSensitive = false minMatchCharLength = 1 findAllMatches = false location = 0 threshold = 0.1 distance = 100 ignoreLocation = true useExtendedSearch = false ignoreFieldNorm = false # 主页信息设置 [languages.zh-cn.params.home] # RSS 文章数目 rss = 10 # 主页个人信息 [languages.zh-cn.params.home.profile] enable = true # Gravatar 邮箱，用于优先在主页显示的头像 gravatarEmail = \"\" # 主页显示头像的 URL avatarURL = \"/images/dnasdw256.png\" # 主页显示的网站标题 (支持 HTML 格式) title = \"\" # 主页显示的网站副标题 # TODO subtitle = \"\" # 是否为副标题显示打字机动画 typeit = false # 是否显示社交账号 social = true # 免责声明 (支持 HTML 格式) disclaimer = \"\" # 主页文章列表 [languages.zh-cn.params.home.posts] enable = true # 主页每页显示文章数量 paginate = 10 # 主页的社交信息设置 [languages.zh-cn.params.social] GitHub = \"dnasdw\" Linkedin = \"\" Twitter = \"sundaowen\" Instagram = \"\" Facebook = \"\" Telegram = \"\" Medium = \"\" Gitlab = \"dnasdw\" Youtubelegacy = \"\" Youtubecustom = \"\" Youtubechannel = \"\" Tumblr = \"\" Quora = \"\" Keybase = \"\" Pinterest = \"\" Reddit = \"\" Codepen = \"\" FreeCodeCamp = \"\" Bitbucket = \"dnasdw\" Stackoverflow = \"\" Weibo = \"dnasdw\" Odnoklassniki = \"\" VK = \"\" Flickr = \"\" Xing = \"\" Snapchat = \"\" Soundcloud = \"\" Spotify = \"\" Bandcamp = \"\" Paypal = \"\" Fivehundredpx = \"\" Mix = \"\" Goodreads = \"\" Lastfm = \"\" Foursquare = \"\" Hackernews = \"\" Kickstarter = \"\" Patreon = \"\" Steam = \"dnasdw\" Twitch = \"\" Strava = \"\" Skype = \"\" Whatsapp = \"\" Zhihu = \"dnasdw\" Douban = \"\" Angellist = \"\" Slidershare = \"\" Jsfiddle =","date":"2021-12-06","objectID":"/anr/posts/anr/:120:0","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#更新config-9"},{"categories":null,"content":"菜单url 如果config中baseURL包含子目录, 则menu配置中的url不能以斜杠开始, 比如\"所有文章\"的url不可以为/posts/, 但可以为posts/或./posts/. ","date":"2021-12-06","objectID":"/anr/posts/anr/:120:1","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#菜单url-9"},{"categories":null,"content":"头像文件 创建assets/images/dnasdw256.png, 并将config中的头像路径改为/images/dnasdw256.png. ","date":"2021-12-06","objectID":"/anr/posts/anr/:120:2","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#头像文件-9"},{"categories":null,"content":"网站图标 准备一个512x512的图标, 比如去https://www.flaticon.com/搜索一个合适的. 去https://realfavicongenerator.net/上传图标, 下载得到图标配置包, 解压到static目录. 如果config中baseURL包含子目录, 则需要将themes/DoIt/layouts/partials/head/link.html复制到layouts/partials/head/link.html, 并将favicon部分的链接前加上/子目录名, 比如href=\"/favicon.ico\"改为href=\"/draft/favicon.ico\". 配置参考 {{- if not .Site.Params.app.noFavicon -}} {{- with .Site.Params.app.svgFavicon -}} \u003clink rel=\"icon\" href=\"{{ . }}\"\u003e {{- else -}} \u003clink rel=\"shortcut icon\" type=\"image/x-icon\" href=\"/draft/favicon.ico\" /\u003e \u003clink rel=\"icon\" type=\"image/png\" sizes=\"32x32\" href=\"/draft/favicon-32x32.png\"\u003e \u003clink rel=\"icon\" type=\"image/png\" sizes=\"16x16\" href=\"/draft/favicon-16x16.png\"\u003e {{- end -}} \u003clink rel=\"apple-touch-icon\" sizes=\"180x180\" href=\"/draft/apple-touch-icon.png\"\u003e {{- with .Site.Params.app.iconColor -}} \u003clink rel=\"mask-icon\" href=\"/draft/safari-pinned-tab.svg\" color=\"{{ . }}\"\u003e {{- end -}} {{- if eq .Site.Params.enablePWA true -}} \u003clink rel=\"manifest\" href=\"/draft/site.webmanifest\"\u003e {{- end -}} {{- end -}} ","date":"2021-12-06","objectID":"/anr/posts/anr/:120:3","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#网站图标-9"},{"categories":null,"content":"补充缺失的中文译文 创建i18n/zh-CN.toml # Translations for Simplified Chinese # 简体中文的翻译 # https://gohugo.io/content-management/multilingual/#translation-of-strings [authors] other = \"作者\" ","date":"2021-12-06","objectID":"/anr/posts/anr/:120:4","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#补充缺失的中文译文-9"},{"categories":null,"content":"作者配置 创建data/authors/dnasdw.toml name = \"dnasdw\" link = \"https://github.com/dnasdw\" 之后就可以在文章的Front Matter中使用authors: [dnasdw]. ","date":"2021-12-06","objectID":"/anr/posts/anr/:120:5","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#作者配置-9"},{"categories":null,"content":"配置PWA 创建content/offline/index.md --- title: \"离线\" --- \u003e 你没有连接至互联网, 只有缓存的页面可用. 修改static/site.webmanifest, 添加start_url, 并填写name/short_name/start_url. { \"name\": \"聚草稿\", \"short_name\": \"聚草稿\", \"start_url\": \"/draft/\", \"icons\": [ { \"src\": \"/draft/android-chrome-192x192.png\", \"sizes\": \"192x192\", \"type\": \"image/png\" }, { \"src\": \"/draft/android-chrome-512x512.png\", \"sizes\": \"512x512\", \"type\": \"image/png\" } ], \"theme_color\": \"#ffffff\", \"background_color\": \"#ffffff\", \"display\": \"standalone\" } 如果config中baseURL包含子目录, 则需要将themes/DoIt/assets/js/sw.js复制到assets/js/sw.js, 并将相关链接前加上/子目录名, 比如/css/style.min.css改为/darft/css/style.min.css; 同样修改static/site.webmanifest中的相关路径, 其中start_url从/改为/子目录名/, 比如\"start_url\": \"/\"改为\"start_url\": \"/draft/\"; 还需要将themes/DoIt/layouts/partials/footer.html复制到layouts/partials/footer.html, 并修改注册参数, 比如.register('/sw.min.js', { scope: '/' })改为.register('/draft/sw.min.js', { scope: '/draft/' }). 配置参考 const BASE_CACHE_FILES = [ '/draft/css/style.min.css', '/draft/js/theme.min.js', '/draft/site.webmanifest' ] const OFFLINE_CACHE_FILES = [ '/draft/css/style.min.css', '/draft/js/theme.min.js', '/draft/site.webmanifest', '/draft/offline' ] const NOT_FOUND_CACHE_FILES = [ '/draft/css/style.min.css', '/draft/js/theme.min.js', '/draft/site.webmanifest', '/draft/404.html' ] const OFFLINE_PAGE = '/draft/offline' const NOT_FOUND_PAGE = '/draft/404.html' ","date":"2021-12-06","objectID":"/anr/posts/anr/:120:6","series":null,"tags":null,"title":"如何创建这个网站","uri":"/anr/posts/anr/#配置pwa-9"},{"categories":null,"content":" 你没有连接至互联网, 只有缓存的页面可用. ","date":"0001-01-01","objectID":"/anr/offline/:0:0","series":null,"tags":null,"title":"离线","uri":"/anr/offline/#"}]